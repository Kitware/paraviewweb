<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>MutualInformationDiagram | ParaViewWeb</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="https://kitware.github.io/paraviewweb/api/InfoViz_Native_MutualInformationDiagram.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="en" href="https://kitware.github.io/paraviewweb/api/InfoViz_Native_MutualInformationDiagram.html">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/paraviewweb/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/paraviewweb/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/paraviewweb/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/paraviewweb/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/paraviewweb/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/paraviewweb/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/paraviewweb/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/paraviewweb/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/paraviewweb/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/paraviewweb/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/paraviewweb/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/paraviewweb/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/paraviewweb/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/paraviewweb/icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  
<link rel="stylesheet" href="/paraviewweb/css/navy.css">

  <!-- endbuild -->
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="/paraviewweb/atom.xml" title="ParaViewWeb" type="application/atom+xml">
  <!-- Open Graph -->
  <meta name="description" content="Sourcebody.html&lt;div class&#x3D;&quot;info-diagram-container&quot;&gt;  &lt;div class&#x3D;&quot;info-diagram-placeholder&quot;&gt;    &lt;div class&#x3D;&quot;id-placeholder-row&quot;&gt;      &lt;span class&#x3D;&amp;quo">
<meta property="og:type" content="website">
<meta property="og:title" content="MutualInformationDiagram">
<meta property="og:url" content="https://kitware.github.io/paraviewweb/api/InfoViz_Native_MutualInformationDiagram.html">
<meta property="og:site_name" content="ParaViewWeb">
<meta property="og:description" content="Sourcebody.html&lt;div class&#x3D;&quot;info-diagram-container&quot;&gt;  &lt;div class&#x3D;&quot;info-diagram-placeholder&quot;&gt;    &lt;div class&#x3D;&quot;id-placeholder-row&quot;&gt;      &lt;span class&#x3D;&amp;quo">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-01-31T01:59:37.200Z">
<meta property="article:modified_time" content="2022-01-31T01:59:37.200Z">
<meta property="article:author" content="Kitware Inc.">
<meta name="twitter:card" content="summary">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90338862-2', 'auto');
  ga('send', 'pageview');
</script>



<meta name="generator" content="Hexo 5.4.1"></head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="/paraviewweb/" id="logo">ParaViewWeb</a>
    </h1>
    <nav id="main-nav">
      <a href="/paraviewweb/docs/" class="main-nav-link">Docs</a><a href="/paraviewweb/api/" class="main-nav-link">API</a><a href="/paraviewweb/examples/" class="main-nav-link">Examples</a><a href="/paraviewweb/applications/" class="main-nav-link">Applications</a>
      <a target="_blank" rel="noopener" href="https://github.com/kitware/paraviewweb" class="main-nav-link"><i class="fa fa-github-alt"></i></a>
      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">MutualInformationDiagram</h1>
              </header>
              <div class="article-content" itemprop="articleBody">
                <h1 id="Source" class="article-heading"><a href="#Source" class="headerlink" title="Source"></a>Source<a class="article-anchor" href="#Source" aria-hidden="true"></a></h1><figure class="highlight js"><figcaption><span>body.html</span></figcaption><table><tr><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;info-diagram-container&quot;</span>&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;info-diagram-placeholder&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;id-placeholder-row&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;id-placeholder-title&quot;</span>&gt;</span>Information Diagram<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;id-placeholder-row&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;id-placeholder-image&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;id-placeholder-row&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;id-placeholder-info&quot;</span>&gt;</span>Please select two or more variables<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;status-bar-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;status-bar&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;show-button&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;hide-button&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;status-bar-text&quot;</span> <span class="attr">readonly</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>index.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> d3 <span class="keyword">from</span> <span class="string">&#x27;d3&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> style <span class="keyword">from</span> <span class="string">&#x27;PVWStyle/InfoVizNative/InformationDiagram.mcss&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> CompositeClosureHelper <span class="keyword">from</span> <span class="string">&#x27;paraviewweb/src/Common/Core/CompositeClosureHelper&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> htmlContent <span class="keyword">from</span> <span class="string">&#x27;paraviewweb/src/InfoViz/Native/MutualInformationDiagram/body.html&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> iconImage <span class="keyword">from</span> <span class="string">&#x27;paraviewweb/src/InfoViz/Native/MutualInformationDiagram/InfoDiagramIconSmall.png&#x27;</span>;</span><br><span class="line"><span class="comment">// import multiClicker from &#x27;../../Core/D3MultiClick&#x27;;</span></span><br><span class="line"><span class="keyword">import</span> SelectionBuilder <span class="keyword">from</span> <span class="string">&#x27;paraviewweb/src/Common/Misc/SelectionBuilder&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> AnnotationBuilder <span class="keyword">from</span> <span class="string">&#x27;paraviewweb/src/Common/Misc/AnnotationBuilder&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  calculateAngleAndRadius,</span><br><span class="line">  downsample,</span><br><span class="line">  freqToProb,</span><br><span class="line">  topBinPmi,</span><br><span class="line">  topPmi,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;./utils&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> PMI_CHORD_MODE_NONE = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> PMI_CHORD_MODE_ONE_BIN_ALL_VARS = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> PMI_CHORD_MODE_ALL_BINS_TWO_VARS = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> miCount = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable no-use-before-define */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">// Information Diagram</span></span><br><span class="line"><span class="comment">// ----------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">informationDiagram</span>(<span class="params">publicAPI, model</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> lastAnnotationPushed = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    !model.provider ||</span><br><span class="line">    !model.provider.isA(<span class="string">&#x27;MutualInformationProvider&#x27;</span>) ||</span><br><span class="line">    !model.provider.isA(<span class="string">&#x27;Histogram1DProvider&#x27;</span>) ||</span><br><span class="line">    !model.provider.isA(<span class="string">&#x27;FieldProvider&#x27;</span>)</span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Invalid provider:&#x27;</span>, model.provider);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  model.renderState = &#123;</span><br><span class="line">    <span class="attr">pmiAllBinsTwoVars</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">pmiOneBinAllVars</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">pmiHighlight</span>: <span class="literal">null</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  model.clientRect = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  miCount += <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// unique id, based on count</span></span><br><span class="line">  model.instanceID = <span class="string">`pvwInformationDiagram-<span class="subst">$&#123;miCount&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Handle style for status bar</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">updateStatusBarVisibility</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> cntnr = d3.select(model.container);</span><br><span class="line">    <span class="keyword">if</span> (model.statusBarVisible) &#123;</span><br><span class="line">      cntnr</span><br><span class="line">        .select(<span class="string">&#x27;.status-bar-container&#x27;</span>)</span><br><span class="line">        .style(<span class="string">&#x27;width&#x27;</span>, <span class="function"><span class="keyword">function</span> <span class="title">updateWidth</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="built_in">this</span>.dataset.width;</span><br><span class="line">        &#125;);</span><br><span class="line">      cntnr.select(<span class="string">&#x27;.show-button&#x27;</span>).classed(style.hidden, <span class="literal">true</span>);</span><br><span class="line">      cntnr.select(<span class="string">&#x27;.hide-button&#x27;</span>).classed(style.hidden, <span class="literal">false</span>);</span><br><span class="line">      cntnr.select(<span class="string">&#x27;.status-bar-text&#x27;</span>).classed(style.hidden, <span class="literal">false</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      cntnr.select(<span class="string">&#x27;.status-bar-container&#x27;</span>).style(<span class="string">&#x27;width&#x27;</span>, <span class="string">&#x27;20px&#x27;</span>);</span><br><span class="line">      cntnr.select(<span class="string">&#x27;.show-button&#x27;</span>).classed(style.hidden, <span class="literal">false</span>);</span><br><span class="line">      cntnr.select(<span class="string">&#x27;.hide-button&#x27;</span>).classed(style.hidden, <span class="literal">true</span>);</span><br><span class="line">      cntnr.select(<span class="string">&#x27;.status-bar-text&#x27;</span>).classed(style.hidden, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  publicAPI.propagateAnnotationInsteadOfSelection = <span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">    useAnnotation = <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    defaultScore = <span class="number">0</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    defaultWeight = <span class="number">0</span></span></span></span><br><span class="line"><span class="params"><span class="function">  </span>) =&gt;</span> &#123;</span><br><span class="line">    model.useAnnotation = useAnnotation;</span><br><span class="line">    model.defaultScore = defaultScore;</span><br><span class="line">    model.defaultWeight = defaultWeight;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  publicAPI.resize = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!model.container) &#123;</span><br><span class="line">      <span class="keyword">return</span>; <span class="comment">// no shirt, no shoes, no service.</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    model.clientRect = model.container.getBoundingClientRect();</span><br><span class="line"></span><br><span class="line">    d3.select(model.container)</span><br><span class="line">      .select(<span class="string">&#x27;div.status-bar-container&#x27;</span>)</span><br><span class="line">      .attr(<span class="string">&#x27;data-width&#x27;</span>, <span class="string">`<span class="subst">$&#123;model.clientRect.width - <span class="number">20</span>&#125;</span>px`</span>);</span><br><span class="line"></span><br><span class="line">    publicAPI.render();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  publicAPI.setContainer = <span class="function">(<span class="params">el</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (model.container) &#123;</span><br><span class="line">      <span class="keyword">while</span> (model.container.firstChild) &#123;</span><br><span class="line">        model.container.removeChild(model.container.firstChild);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    model.container = el;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (model.container) &#123;</span><br><span class="line">      <span class="comment">// Create placeholder</span></span><br><span class="line">      model.container.innerHTML = htmlContent;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Apply style</span></span><br><span class="line">      <span class="keyword">const</span> d3Container = d3</span><br><span class="line">        .select(model.container)</span><br><span class="line">        .select(<span class="string">&#x27;.info-diagram-container&#x27;</span>)</span><br><span class="line">        .classed(style.infoDiagramContainer, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">      d3Container</span><br><span class="line">        .select(<span class="string">&#x27;.status-bar-container&#x27;</span>)</span><br><span class="line">        .classed(style.statusBarContainer, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">      d3Container.select(<span class="string">&#x27;.status-bar-text&#x27;</span>).classed(style.statusBarText, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">      d3Container.select(<span class="string">&#x27;.show-button&#x27;</span>).classed(style.showButton, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">      d3Container.select(<span class="string">&#x27;.hide-button&#x27;</span>).classed(style.hideButton, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">      d3Container</span><br><span class="line">        .select(<span class="string">&#x27;.info-diagram-placeholder&#x27;</span>)</span><br><span class="line">        .classed(style.infoDiagramPlaceholder, <span class="literal">true</span>)</span><br><span class="line">        .select(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">        .attr(<span class="string">&#x27;src&#x27;</span>, iconImage);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Attach listener for show/hide status bar</span></span><br><span class="line">      d3Container.selectAll(<span class="string">&#x27;.show-button, .hide-button&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        model.statusBarVisible = !model.statusBarVisible;</span><br><span class="line">        updateStatusBarVisibility();</span><br><span class="line">        d3.event.preventDefault();</span><br><span class="line">        d3.event.stopPropagation();</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      updateStatusBarVisibility();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  publicAPI.updateStatusBarText = <span class="function">(<span class="params">msg</span>) =&gt;</span></span><br><span class="line">    d3</span><br><span class="line">      .select(model.container)</span><br><span class="line">      .select(<span class="string">&#x27;input.status-bar-text&#x27;</span>)</span><br><span class="line">      .attr(<span class="string">&#x27;value&#x27;</span>, msg);</span><br><span class="line"></span><br><span class="line">  publicAPI.selectStatusBarText = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// select text so user can press ctrl-c if desired.</span></span><br><span class="line">    <span class="keyword">if</span> (model.statusBarVisible) &#123;</span><br><span class="line">      <span class="comment">// https://www.sitepoint.com/javascript-copy-to-clipboard/</span></span><br><span class="line">      d3.select(model.container)</span><br><span class="line">        .select(<span class="string">&#x27;input.status-bar-text&#x27;</span>)</span><br><span class="line">        .node()</span><br><span class="line">        .select();</span><br><span class="line">      <span class="comment">// Copy-to-clipboard works because status bar text is an &#x27;input&#x27;:</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="built_in">document</span>.execCommand(<span class="string">&#x27;copy&#x27;</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;Copy to clipboard failed. Press Ctrl-C to copy&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// track chord mode between renders</span></span><br><span class="line">  <span class="keyword">const</span> pmiChordMode = &#123;</span><br><span class="line">    <span class="attr">mode</span>: PMI_CHORD_MODE_NONE,</span><br><span class="line">    <span class="attr">srcParam</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">srcBin</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">miIndex</span>: -<span class="number">1</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  publicAPI.render = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Extract provider data for local access</span></span><br><span class="line">    <span class="keyword">const</span> getLegend = model.provider.isA(<span class="string">&#x27;LegendProvider&#x27;</span>)</span><br><span class="line">      ? model.provider.getLegend</span><br><span class="line">      : <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">const</span> histogram1DnumberOfBins = model.numberOfBins;</span><br><span class="line">    <span class="keyword">const</span> variableList = model.provider.getActiveFieldNames();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (variableList.length &lt; <span class="number">2</span> || !model.container) &#123;</span><br><span class="line">      <span class="comment">// Select the main circle and hide it and unhide placeholder</span></span><br><span class="line">      d3.select(model.container)</span><br><span class="line">        .select(<span class="string">&#x27;svg.information-diagram&#x27;</span>)</span><br><span class="line">        .classed(style.informationDiagramSvgShow, <span class="literal">false</span>)</span><br><span class="line">        .classed(style.informationDiagramSvgHide, <span class="literal">true</span>);</span><br><span class="line">      d3.select(model.container)</span><br><span class="line">        .select(<span class="string">&#x27;div.info-diagram-placeholder&#x27;</span>)</span><br><span class="line">        .classed(style.hidden, <span class="literal">false</span>);</span><br><span class="line">      publicAPI.updateStatusBarText(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Guard against rendering if container is non-null but has no size (as</span></span><br><span class="line">    <span class="comment">// in the case when workbench layout doesn&#x27;t include our container)</span></span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      model.clientRect === <span class="literal">null</span> ||</span><br><span class="line">      model.clientRect.width === <span class="number">0</span> ||</span><br><span class="line">      model.clientRect.height === <span class="number">0</span></span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> width = model.clientRect.width;</span><br><span class="line">    <span class="keyword">const</span> height = model.clientRect.height;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Make sure we have all the data we need</span></span><br><span class="line">    <span class="keyword">if</span> (!model.mutualInformationData || !model.histogramData) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update</span></span><br><span class="line">    updateStatusBarVisibility();</span><br><span class="line"></span><br><span class="line">    d3.select(model.container)</span><br><span class="line">      .select(<span class="string">&#x27;div.info-diagram-placeholder&#x27;</span>)</span><br><span class="line">      .classed(style.hidden, <span class="literal">true</span>);</span><br><span class="line">    d3.select(model.container)</span><br><span class="line">      .select(<span class="string">&#x27;svg.information-diagram&#x27;</span>)</span><br><span class="line">      .classed(style.informationDiagramSvgHide, <span class="literal">false</span>)</span><br><span class="line">      .classed(style.informationDiagramSvgShow, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> outerHistoRadius = <span class="built_in">Math</span>.min(width, height) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">const</span> veryOutermostRadius = outerHistoRadius + <span class="number">80</span>;</span><br><span class="line">    <span class="keyword">const</span> histoRadius = outerHistoRadius - <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">const</span> outerRadius = histoRadius - <span class="number">50</span>;</span><br><span class="line">    <span class="keyword">const</span> innerRadius = outerRadius - <span class="number">24</span>;</span><br><span class="line">    <span class="keyword">const</span> deltaRadius = outerRadius - innerRadius;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> formatPercent = d3.format(<span class="string">&#x27;.1%&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> formatMI = d3.format(<span class="string">&#x27;.2f&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> formatVal = d3.format(<span class="string">&#x27;.2s&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> arc = d3.svg.arc().innerRadius(innerRadius).outerRadius(outerRadius);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> histoArc = d3.svg.arc().innerRadius(outerRadius + <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> insideArc = d3.svg.arc().innerRadius(<span class="number">1</span>).outerRadius(innerRadius);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> layout = d3.layout</span><br><span class="line">      .chord()</span><br><span class="line">      .padding(<span class="number">0.04</span>)</span><br><span class="line">      .sortSubgroups(d3.descending)</span><br><span class="line">      .sortChords(d3.ascending);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> path = d3.svg.chord().radius(innerRadius);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> svgParent = d3.select(model.container).select(<span class="string">&#x27;svg&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> svg = svgParent.select(<span class="string">&#x27;.main-circle&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (svgParent.empty()) &#123;</span><br><span class="line">      svgParent = d3</span><br><span class="line">        .select(model.container)</span><br><span class="line">        .append(<span class="string">&#x27;svg&#x27;</span>)</span><br><span class="line">        .style(<span class="string">&#x27;float&#x27;</span>, <span class="string">&#x27;left&#x27;</span>)</span><br><span class="line">        .attr(<span class="string">&#x27;class&#x27;</span>, style.informationDiagramSvgShow)</span><br><span class="line">        .classed(<span class="string">&#x27;information-diagram&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">      svg = svgParent</span><br><span class="line">        .append(<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">        .classed(<span class="string">&#x27;main-circle&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">        .classed(style.mainCircle, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    svgParent.attr(<span class="string">&#x27;width&#x27;</span>, width).attr(<span class="string">&#x27;height&#x27;</span>, height);</span><br><span class="line">    svg.attr(<span class="string">&#x27;transform&#x27;</span>, <span class="string">`translate(<span class="subst">$&#123;width <span class="regexp">/ 2&#125;, $&#123;height /</span> <span class="number">2</span>&#125;</span>)`</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">findGroupAndBin</span>(<span class="params">relCoords</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> result = &#123;</span><br><span class="line">        <span class="attr">found</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">group</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">bin</span>: -<span class="number">1</span>,</span><br><span class="line">        <span class="attr">radius</span>: <span class="number">0</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">const</span> [angle, radius] = calculateAngleAndRadius(relCoords, [</span><br><span class="line">        width,</span><br><span class="line">        height,</span><br><span class="line">      ]);</span><br><span class="line">      result.radius = radius;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> groupIdx = <span class="number">0</span>; groupIdx &lt; layout.groups().length; ++groupIdx) &#123;</span><br><span class="line">        <span class="keyword">const</span> groupData = layout.groups()[groupIdx];</span><br><span class="line">        <span class="keyword">const</span> groupName =</span><br><span class="line">          model.mutualInformationData.vmap[groupData.index].name;</span><br><span class="line">        <span class="keyword">if</span> (angle &gt; groupData.startAngle &amp;&amp; angle &lt;= groupData.endAngle) &#123;</span><br><span class="line">          <span class="keyword">const</span> binSizeRadians =</span><br><span class="line">            (groupData.endAngle - groupData.startAngle) / model.numberOfBins;</span><br><span class="line">          <span class="keyword">const</span> binIndex = <span class="built_in">Math</span>.floor(</span><br><span class="line">            (angle - groupData.startAngle) / binSizeRadians</span><br><span class="line">          );</span><br><span class="line">          result.found = <span class="literal">true</span>;</span><br><span class="line">          result.group = groupName;</span><br><span class="line">          result.bin = binIndex;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">unHoverBin</span>(<span class="params">param</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (model.provider.isA(<span class="string">&#x27;HistogramBinHoverProvider&#x27;</span>)) &#123;</span><br><span class="line">        <span class="keyword">const</span> state = &#123;&#125;;</span><br><span class="line">        state[param] = [-<span class="number">1</span>];</span><br><span class="line">        model.provider.setHoverState(&#123;</span><br><span class="line">          <span class="attr">source</span>: <span class="string">&#x27;MutualInformationDiagram&#x27;</span>,</span><br><span class="line">          state,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">hoverBins</span>(<span class="params">binMap</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (model.provider.isA(<span class="string">&#x27;HistogramBinHoverProvider&#x27;</span>)) &#123;</span><br><span class="line">        model.provider.setHoverState(&#123;</span><br><span class="line">          <span class="attr">source</span>: <span class="string">&#x27;MutualInformationDiagram&#x27;</span>,</span><br><span class="line">          <span class="attr">state</span>: binMap,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">updateActiveSelection</span>(<span class="params">binMap</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        !model.provider.isA(<span class="string">&#x27;SelectionProvider&#x27;</span>) ||</span><br><span class="line">        !model.provider.isA(<span class="string">&#x27;FieldProvider&#x27;</span>)</span><br><span class="line">      ) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> vars = &#123;&#125;;</span><br><span class="line">      <span class="keyword">let</span> proceed = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">Object</span>.keys(binMap).forEach(<span class="function">(<span class="params">pName</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> paramRange = model.provider.getField(pName).range;</span><br><span class="line">        <span class="keyword">const</span> binList = binMap[pName];</span><br><span class="line">        <span class="keyword">const</span> rangeList = [];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; binList.length; ++i) &#123;</span><br><span class="line">          <span class="keyword">if</span> (binList[i] !== -<span class="number">1</span>) &#123;</span><br><span class="line">            rangeList.push(&#123;</span><br><span class="line">              <span class="attr">interval</span>: getBinRange(binList[i], histogram1DnumberOfBins, [</span><br><span class="line">                paramRange[<span class="number">0</span>],</span><br><span class="line">                paramRange[<span class="number">1</span>],</span><br><span class="line">                paramRange[<span class="number">1</span>] - paramRange[<span class="number">0</span>],</span><br><span class="line">              ]),</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (rangeList.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          proceed = <span class="literal">true</span>;</span><br><span class="line">          vars[pName] = rangeList;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (proceed) &#123;</span><br><span class="line">        <span class="keyword">const</span> selection = SelectionBuilder.range(vars);</span><br><span class="line">        <span class="keyword">if</span> (model.useAnnotation) &#123;</span><br><span class="line">          lastAnnotationPushed = model.provider.getAnnotation();</span><br><span class="line">          <span class="keyword">if</span> (</span><br><span class="line">            !lastAnnotationPushed ||</span><br><span class="line">            model.provider.shouldCreateNewAnnotation() ||</span><br><span class="line">            lastAnnotationPushed.selection.type !== <span class="string">&#x27;range&#x27;</span></span><br><span class="line">          ) &#123;</span><br><span class="line">            lastAnnotationPushed = AnnotationBuilder.annotation(</span><br><span class="line">              selection,</span><br><span class="line">              [model.defaultScore],</span><br><span class="line">              model.defaultWeight</span><br><span class="line">            );</span><br><span class="line">            <span class="keyword">if</span> (lastAnnotationPushed.name === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">              <span class="comment">// set default range annotation name</span></span><br><span class="line">              AnnotationBuilder.setDefaultName(lastAnnotationPushed);</span><br><span class="line">              <span class="keyword">if</span> (model.provider.isA(<span class="string">&#x27;AnnotationStoreProvider&#x27;</span>)) &#123;</span><br><span class="line">                lastAnnotationPushed.name = model.provider.getNextStoredAnnotationName(</span><br><span class="line">                  lastAnnotationPushed.name</span><br><span class="line">                );</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            lastAnnotationPushed = AnnotationBuilder.update(</span><br><span class="line">              lastAnnotationPushed,</span><br><span class="line">              &#123;</span><br><span class="line">                selection,</span><br><span class="line">                <span class="attr">score</span>: [model.defaultScore],</span><br><span class="line">                <span class="attr">weight</span>: model.defaultWeight,</span><br><span class="line">              &#125;</span><br><span class="line">            );</span><br><span class="line">          &#125;</span><br><span class="line">          AnnotationBuilder.updateReadOnlyFlag(</span><br><span class="line">            lastAnnotationPushed,</span><br><span class="line">            model.readOnlyFields</span><br><span class="line">          );</span><br><span class="line">          model.provider.setAnnotation(lastAnnotationPushed);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          model.provider.setSelection(selection);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// function findPmiChordsToHighlight(param, bin, highlight = true, oneBinAllVarsMode = false) &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">findPmiChordsToHighlight</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="attr">group</span>: param,</span><br><span class="line">        bin,</span><br><span class="line">        highlight,</span><br><span class="line">        <span class="attr">mode</span>: oneBinAllVarsMode,</span><br><span class="line">      &#125; = model.renderState.pmiHighlight;</span><br><span class="line">      <span class="keyword">if</span> (highlight) &#123;</span><br><span class="line">        svg</span><br><span class="line">          .select(<span class="string">&#x27;g.pmiChords&#x27;</span>)</span><br><span class="line">          .selectAll(<span class="string">&#x27;path.pmiChord&#x27;</span>)</span><br><span class="line">          .classed(<span class="string">&#x27;highlight-pmi&#x27;</span>, <span class="literal">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> binMap = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">addBin</span>(<span class="params">pName, bIdx</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!binMap[pName]) &#123;</span><br><span class="line">          binMap[pName] = [];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (binMap[pName].indexOf(bIdx) === -<span class="number">1</span>) &#123;</span><br><span class="line">          binMap[pName].push(bIdx);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (oneBinAllVarsMode) &#123;</span><br><span class="line">        svg</span><br><span class="line">          .select(<span class="string">&#x27;g.pmiChords&#x27;</span>)</span><br><span class="line">          .selectAll(<span class="string">`path[data-source-name=&quot;<span class="subst">$&#123;param&#125;</span>&quot;]:not(.fade)`</span>)</span><br><span class="line">          .classed(<span class="string">&#x27;highlight-pmi&#x27;</span>, highlight)</span><br><span class="line">          .each(<span class="function"><span class="keyword">function</span> <span class="title">highlightPMI</span>(<span class="params">d, i</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">const</span> elt = d3.select(<span class="built_in">this</span>);</span><br><span class="line">            addBin(param, bin);</span><br><span class="line">            addBin(</span><br><span class="line">              elt.attr(<span class="string">&#x27;data-target-name&#x27;</span>),</span><br><span class="line">              <span class="built_in">Number</span>.parseInt(elt.attr(<span class="string">&#x27;data-target-bin&#x27;</span>), <span class="number">10</span>)</span><br><span class="line">            );</span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">        svg</span><br><span class="line">          .select(<span class="string">&#x27;g.pmiChords&#x27;</span>)</span><br><span class="line">          .selectAll(<span class="string">`path[data-target-name=&quot;<span class="subst">$&#123;param&#125;</span>&quot;]:not(.fade)`</span>)</span><br><span class="line">          .each(<span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params">d, i</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">const</span> elt = d3.select(<span class="built_in">this</span>);</span><br><span class="line">            addBin(param, <span class="built_in">Number</span>.parseInt(elt.attr(<span class="string">&#x27;data-target-bin&#x27;</span>), <span class="number">10</span>));</span><br><span class="line">            addBin(</span><br><span class="line">              elt.attr(<span class="string">&#x27;data-source-name&#x27;</span>),</span><br><span class="line">              <span class="built_in">Number</span>.parseInt(elt.attr(<span class="string">&#x27;data-source-bin&#x27;</span>), <span class="number">10</span>)</span><br><span class="line">            );</span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (binMap[param] &amp;&amp; binMap[param].indexOf(bin) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">          binMap[param] = [bin];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        svg</span><br><span class="line">          .select(<span class="string">&#x27;g.pmiChords&#x27;</span>)</span><br><span class="line">          .selectAll(<span class="string">`path[data-target-name=&quot;<span class="subst">$&#123;param&#125;</span>&quot;]:not(.fade)`</span>)</span><br><span class="line">          .classed(<span class="string">&#x27;highlight-pmi&#x27;</span>, <span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params">d, i</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">const</span> elt = d3.select(<span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">return</span> (</span><br><span class="line">              binMap[param].indexOf(</span><br><span class="line">                <span class="built_in">Number</span>.parseInt(elt.attr(<span class="string">&#x27;data-target-bin&#x27;</span>), <span class="number">10</span>)</span><br><span class="line">              ) &gt;= <span class="number">0</span></span><br><span class="line">            );</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        svg</span><br><span class="line">          .select(<span class="string">&#x27;g.pmiChords&#x27;</span>)</span><br><span class="line">          .selectAll(</span><br><span class="line">            <span class="string">`path[data-source-name=&quot;<span class="subst">$&#123;param&#125;</span>&quot;][data-source-bin=&quot;<span class="subst">$&#123;bin&#125;</span>&quot;]:not(.fade)`</span></span><br><span class="line">          )</span><br><span class="line">          .classed(<span class="string">&#x27;highlight-pmi&#x27;</span>, highlight)</span><br><span class="line">          .each(<span class="function"><span class="keyword">function</span> <span class="title">highlightPMI</span>(<span class="params">d, i</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">const</span> elt = d3.select(<span class="built_in">this</span>);</span><br><span class="line">            addBin(param, bin);</span><br><span class="line">            addBin(</span><br><span class="line">              elt.attr(<span class="string">&#x27;data-target-name&#x27;</span>),</span><br><span class="line">              <span class="built_in">Number</span>.parseInt(elt.attr(<span class="string">&#x27;data-target-bin&#x27;</span>), <span class="number">10</span>)</span><br><span class="line">            );</span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">        svg</span><br><span class="line">          .select(<span class="string">&#x27;g.pmiChords&#x27;</span>)</span><br><span class="line">          .selectAll(</span><br><span class="line">            <span class="string">`path[data-target-name=&quot;<span class="subst">$&#123;param&#125;</span>&quot;][data-target-bin=&quot;<span class="subst">$&#123;bin&#125;</span>&quot;]:not(.fade)`</span></span><br><span class="line">          )</span><br><span class="line">          .classed(<span class="string">&#x27;highlight-pmi&#x27;</span>, highlight)</span><br><span class="line">          .each(<span class="function"><span class="keyword">function</span> <span class="title">highlightPMI</span>(<span class="params">d, i</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">const</span> elt = d3.select(<span class="built_in">this</span>);</span><br><span class="line">            addBin(param, bin);</span><br><span class="line">            addBin(</span><br><span class="line">              elt.attr(<span class="string">&#x27;data-source-name&#x27;</span>),</span><br><span class="line">              <span class="built_in">Number</span>.parseInt(elt.attr(<span class="string">&#x27;data-source-bin&#x27;</span>), <span class="number">10</span>)</span><br><span class="line">            );</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> binMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Chord handling ---------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">updateChordVisibility</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (options.mi &amp;&amp; options.mi.show === <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (options.mi.index !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">          chord.classed(</span><br><span class="line">            <span class="string">&#x27;fade&#x27;</span>,</span><br><span class="line">            <span class="function">(<span class="params">p</span>) =&gt;</span></span><br><span class="line">              p.source.index !== options.mi.index &amp;&amp;</span><br><span class="line">              p.target.index !== options.mi.index</span><br><span class="line">          );</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          chord.classed(<span class="string">&#x27;fade&#x27;</span>, <span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        svg.selectAll(<span class="string">&#x27;g.pmiChords path.pmiChord&#x27;</span>).classed(<span class="string">&#x27;fade&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (options.pmi &amp;&amp; options.pmi.show === <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="comment">// Currently drawing pmi chords fades all mi chords, so we</span></span><br><span class="line">        <span class="comment">// don&#x27;t have to do anything here to keep things consistent.</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">drawPMIAllBinsTwoVars</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> d = model.renderState.pmiAllBinsTwoVars.d;</span><br><span class="line">      <span class="keyword">if</span> (d.source.index === d.target.index) &#123;</span><br><span class="line">        <span class="comment">// console.log(&#x27;Cannot render self-PMI&#x27;, model.mutualInformationData.vmap[d.source.index].name);</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      pmiChordMode.mode = PMI_CHORD_MODE_ALL_BINS_TWO_VARS;</span><br><span class="line">      pmiChordMode.srcParam = <span class="literal">null</span>;</span><br><span class="line">      pmiChordMode.srcBin = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Turn off MI rendering</span></span><br><span class="line">      chord.classed(<span class="string">&#x27;fade&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">      <span class="comment">// Turn on PMI rendering</span></span><br><span class="line">      <span class="keyword">let</span> va = model.mutualInformationData.vmap[d.source.index].name;</span><br><span class="line">      <span class="keyword">let</span> vb = model.mutualInformationData.vmap[d.target.index].name;</span><br><span class="line">      <span class="keyword">let</span> swap = <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">if</span> (vb &lt; va) &#123;</span><br><span class="line">        <span class="keyword">const</span> tmp = vb;</span><br><span class="line">        vb = va;</span><br><span class="line">        va = tmp;</span><br><span class="line">        swap = <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> cAB = downsample(</span><br><span class="line">        model.mutualInformationData.joint[va][vb],</span><br><span class="line">        histogram1DnumberOfBins,</span><br><span class="line">        swap</span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">const</span> probDict = freqToProb(cAB);</span><br><span class="line">      <span class="keyword">const</span> linksToDraw = topPmi(probDict, <span class="number">0.95</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Make mutual info chords invisible.</span></span><br><span class="line">      svg.selectAll(<span class="string">&#x27;g.group path.chord&#x27;</span>).classed(<span class="string">&#x27;fade&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> linkData = svg</span><br><span class="line">        .select(<span class="string">&#x27;g.pmiChords&#x27;</span>)</span><br><span class="line">        .selectAll(<span class="string">&#x27;path.pmiChord&#x27;</span>)</span><br><span class="line">        .data(</span><br><span class="line">          d3.zip(</span><br><span class="line">            linksToDraw.idx,</span><br><span class="line">            linksToDraw.pmi,</span><br><span class="line">            <span class="keyword">new</span> <span class="built_in">Array</span>(linksToDraw.idx.length).fill([va, vb])</span><br><span class="line">          )</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">      linkData</span><br><span class="line">        .enter()</span><br><span class="line">        .append(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line">        .classed(<span class="string">&#x27;pmiChord&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">        .classed(style.pmiChord, <span class="literal">true</span>);</span><br><span class="line">      linkData.exit().remove();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> vaGroup = layout.groups()[d.source.index];</span><br><span class="line">      <span class="keyword">const</span> vbGroup = layout.groups()[d.target.index];</span><br><span class="line">      <span class="keyword">const</span> vaRange = [</span><br><span class="line">        vaGroup.startAngle,</span><br><span class="line">        vaGroup.endAngle - vaGroup.startAngle,</span><br><span class="line">        (vaGroup.endAngle - vaGroup.startAngle) / histogram1DnumberOfBins,</span><br><span class="line">      ];</span><br><span class="line">      <span class="keyword">const</span> vbRange = [</span><br><span class="line">        vbGroup.startAngle,</span><br><span class="line">        vbGroup.endAngle - vbGroup.startAngle,</span><br><span class="line">        (vbGroup.endAngle - vbGroup.startAngle) / histogram1DnumberOfBins,</span><br><span class="line">      ];</span><br><span class="line"></span><br><span class="line">      linkData</span><br><span class="line">        .classed(<span class="string">&#x27;fade&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">        .attr(<span class="string">&#x27;d&#x27;</span>, <span class="function">(<span class="params">data, index</span>) =&gt;</span></span><br><span class="line">          path(&#123;</span><br><span class="line">            <span class="attr">source</span>: &#123;</span><br><span class="line">              <span class="attr">startAngle</span>: vaRange[<span class="number">0</span>] + data[<span class="number">0</span>][<span class="number">0</span>] * vaRange[<span class="number">2</span>],</span><br><span class="line">              <span class="attr">endAngle</span>: vaRange[<span class="number">0</span>] + (data[<span class="number">0</span>][<span class="number">0</span>] + <span class="number">1</span>) * vaRange[<span class="number">2</span>],</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">target</span>: &#123;</span><br><span class="line">              <span class="attr">startAngle</span>: vbRange[<span class="number">0</span>] + data[<span class="number">0</span>][<span class="number">1</span>] * vbRange[<span class="number">2</span>],</span><br><span class="line">              <span class="attr">endAngle</span>: vbRange[<span class="number">0</span>] + (data[<span class="number">0</span>][<span class="number">1</span>] + <span class="number">1</span>) * vbRange[<span class="number">2</span>],</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;)</span><br><span class="line">        )</span><br><span class="line">        .attr(<span class="string">&#x27;data-source-name&#x27;</span>, swap ? vb : va)</span><br><span class="line">        .attr(<span class="string">&#x27;data-source-bin&#x27;</span>, <span class="function">(<span class="params">data, index</span>) =&gt;</span> <span class="string">`<span class="subst">$&#123;data[<span class="number">0</span>][<span class="number">0</span>]&#125;</span>`</span>)</span><br><span class="line">        .attr(<span class="string">&#x27;data-target-name&#x27;</span>, swap ? va : vb)</span><br><span class="line">        .attr(<span class="string">&#x27;data-target-bin&#x27;</span>, <span class="function">(<span class="params">data, iindex</span>) =&gt;</span> <span class="string">`<span class="subst">$&#123;data[<span class="number">0</span>][<span class="number">1</span>]&#125;</span>`</span>)</span><br><span class="line">        .classed(<span class="string">&#x27;highlight-pmi&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">        .classed(<span class="string">&#x27;positive&#x27;</span>, <span class="function">(<span class="params">data, index</span>) =&gt;</span> data[<span class="number">1</span>] &gt;= <span class="number">0.0</span>)</span><br><span class="line">        .classed(<span class="string">&#x27;negative&#x27;</span>, <span class="function">(<span class="params">data, index</span>) =&gt;</span> data[<span class="number">1</span>] &lt; <span class="number">0.0</span>)</span><br><span class="line">        .attr(<span class="string">&#x27;data-details&#x27;</span>, <span class="function">(<span class="params">data, index</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> sIdx = swap ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">          <span class="keyword">const</span> tIdx = swap ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">          <span class="keyword">const</span> sourceBinRange = getParamBinRange(</span><br><span class="line">            data[<span class="number">0</span>][sIdx],</span><br><span class="line">            histogram1DnumberOfBins,</span><br><span class="line">            data[<span class="number">2</span>][<span class="number">0</span>]</span><br><span class="line">          );</span><br><span class="line">          <span class="keyword">const</span> targetBinRange = getParamBinRange(</span><br><span class="line">            data[<span class="number">0</span>][tIdx],</span><br><span class="line">            histogram1DnumberOfBins,</span><br><span class="line">            data[<span class="number">2</span>][<span class="number">1</span>]</span><br><span class="line">          );</span><br><span class="line">          <span class="keyword">return</span> (</span><br><span class="line">            <span class="string">&#x27;PMI: &#x27;</span> +</span><br><span class="line">            <span class="string">`<span class="subst">$&#123;data[<span class="number">2</span>][<span class="number">0</span>]&#125;</span> ∈ [ <span class="subst">$&#123;formatVal(sourceBinRange[<span class="number">0</span>])&#125;</span>, <span class="subst">$&#123;formatVal(</span></span></span><br><span class="line"><span class="subst"><span class="string">              sourceBinRange[<span class="number">1</span>]</span></span></span><br><span class="line"><span class="subst"><span class="string">            )&#125;</span>] ↔︎ `</span> +</span><br><span class="line">            <span class="string">`<span class="subst">$&#123;data[<span class="number">2</span>][<span class="number">1</span>]&#125;</span> ∈ [ <span class="subst">$&#123;formatVal(targetBinRange[<span class="number">0</span>])&#125;</span>, <span class="subst">$&#123;formatVal(</span></span></span><br><span class="line"><span class="subst"><span class="string">              targetBinRange[<span class="number">1</span>]</span></span></span><br><span class="line"><span class="subst"><span class="string">            )&#125;</span>] <span class="subst">$&#123;formatMI(data[<span class="number">1</span>])&#125;</span>`</span></span><br><span class="line">          );</span><br><span class="line">        &#125;)</span><br><span class="line">        .on(<span class="string">&#x27;mouseover&#x27;</span>, <span class="function"><span class="keyword">function</span> <span class="title">mouseOver</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          publicAPI.updateStatusBarText(d3.select(<span class="built_in">this</span>).attr(<span class="string">&#x27;data-details&#x27;</span>));</span><br><span class="line">        &#125;)</span><br><span class="line">        .on(<span class="string">&#x27;mouseout&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          publicAPI.updateStatusBarText(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">        .on(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          publicAPI.selectStatusBarText();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Mouse move handling ----------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">    svgParent</span><br><span class="line">      <span class="comment">/* eslint-disable prefer-arrow-callback */</span></span><br><span class="line">      <span class="comment">// need d3 provided &#x27;this&#x27;, below.</span></span><br><span class="line">      .on(<span class="string">&#x27;mousemove&#x27;</span>, <span class="function"><span class="keyword">function</span> <span class="title">mouseMove</span>(<span class="params">d, i</span>) </span>&#123;</span><br><span class="line">        <span class="comment">/* xxeslint-enable prefer-arrow-callback */</span></span><br><span class="line">        <span class="keyword">const</span> overCoords = d3.mouse(model.container);</span><br><span class="line">        <span class="keyword">const</span> info = findGroupAndBin(overCoords);</span><br><span class="line">        <span class="keyword">let</span> clearStatusBar = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">let</span> groupHoverName = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">let</span> groupInsideName = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">let</span> highlightAllGroups = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> idx = <span class="number">0</span>; idx &lt; variableList.length; ++idx) &#123;</span><br><span class="line">          unHoverBin(variableList[idx]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (info.radius &gt; veryOutermostRadius) &#123;</span><br><span class="line">          highlightAllGroups = <span class="literal">true</span>;</span><br><span class="line">          clearStatusBar = <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (info.found) &#123;</span><br><span class="line">          <span class="keyword">if</span> (info.radius &gt; innerRadius &amp;&amp; info.radius &lt;= outerRadius)</span><br><span class="line">            groupHoverName = info.group;</span><br><span class="line">          <span class="keyword">else</span> <span class="keyword">if</span> (info.radius &lt;= innerRadius) groupInsideName = info.group;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">let</span> binMap = &#123;&#125;;</span><br><span class="line">          <span class="keyword">if</span> (</span><br><span class="line">            !(</span><br><span class="line">              info.radius &lt;= innerRadius &amp;&amp;</span><br><span class="line">              pmiChordMode.mode === PMI_CHORD_MODE_NONE</span><br><span class="line">            )</span><br><span class="line">          ) &#123;</span><br><span class="line">            <span class="keyword">const</span> oneBinAllVarsMode =</span><br><span class="line">              info.radius &lt;= innerRadius &amp;&amp;</span><br><span class="line">              pmiChordMode.mode === PMI_CHORD_MODE_ONE_BIN_ALL_VARS;</span><br><span class="line">            model.renderState.pmiHighlight = &#123;</span><br><span class="line">              <span class="attr">group</span>: info.group,</span><br><span class="line">              <span class="attr">bin</span>: info.bin,</span><br><span class="line">              <span class="attr">highlight</span>: <span class="literal">true</span>,</span><br><span class="line">              <span class="attr">mode</span>: oneBinAllVarsMode,</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">const</span> pmiBinMap = findPmiChordsToHighlight();</span><br><span class="line">            <span class="keyword">if</span> (info.radius &lt;= innerRadius) &#123;</span><br><span class="line">              binMap = pmiBinMap;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              svg</span><br><span class="line">                .select(<span class="string">`g.group[param-name=&#x27;<span class="subst">$&#123;info.group&#125;</span>&#x27;`</span>)</span><br><span class="line">                .selectAll(<span class="string">&#x27;path.htile&#x27;</span>)</span><br><span class="line">                .each(<span class="function"><span class="keyword">function</span> <span class="title">hTileInner</span>(<span class="params">data, index</span>) </span>&#123;</span><br><span class="line">                  <span class="keyword">if</span> (index === info.bin) &#123;</span><br><span class="line">                    publicAPI.updateStatusBarText(</span><br><span class="line">                      d3.select(<span class="built_in">this</span>).attr(<span class="string">&#x27;data-details&#x27;</span>)</span><br><span class="line">                    );</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!oneBinAllVarsMode) &#123;</span><br><span class="line">              binMap[info.group] = [info.bin];</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          hoverBins(binMap);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          clearStatusBar = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// show a clickable variable legend arc, if hovered, or</span></span><br><span class="line">        <span class="comment">// highlight all groups if a click will reset to default view (veryOutermostRadius)</span></span><br><span class="line">        svg</span><br><span class="line">          .selectAll(<span class="string">`g.group path[id^=\&#x27;<span class="subst">$&#123;model.instanceID&#125;</span>-group\&#x27;]`</span>)</span><br><span class="line">          .classed(</span><br><span class="line">            style.hoverOutline,</span><br><span class="line">            <span class="function">(<span class="params">data, idx</span>) =&gt;</span></span><br><span class="line">              highlightAllGroups ||</span><br><span class="line">              model.mutualInformationData.vmap[idx].name === groupHoverName</span><br><span class="line">          );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// show mouse-interaction guide inside the legend arcs.</span></span><br><span class="line">        svg</span><br><span class="line">          .selectAll(<span class="string">&#x27;g.group&#x27;</span>)</span><br><span class="line">          .select(<span class="string">`.<span class="subst">$&#123;style.jsMouseArc&#125;</span>`</span>)</span><br><span class="line">          .attr(<span class="string">&#x27;class&#x27;</span>, <span class="function">(<span class="params">data, idx</span>) =&gt;</span></span><br><span class="line">            model.mutualInformationData.vmap[idx].name === groupInsideName</span><br><span class="line">              ? style.mouseArcViz</span><br><span class="line">              : style.mouseArcHidden</span><br><span class="line">          );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (clearStatusBar === <span class="literal">true</span>) &#123;</span><br><span class="line">          publicAPI.updateStatusBarText(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      .on(<span class="string">&#x27;mouseout&#x27;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> idx = <span class="number">0</span>; idx &lt; variableList.length; ++idx) &#123;</span><br><span class="line">          unHoverBin(variableList[idx]);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      .on(</span><br><span class="line">        <span class="string">&#x27;click&#x27;</span>, <span class="comment">// multiClicker([</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">singleClick</span>(<span class="params">d, i</span>) </span>&#123;</span><br><span class="line">          <span class="comment">// single click handler</span></span><br><span class="line">          <span class="keyword">const</span> overCoords = d3.mouse(model.container);</span><br><span class="line">          <span class="keyword">const</span> info = findGroupAndBin(overCoords);</span><br><span class="line">          <span class="keyword">if</span> (info.radius &gt; veryOutermostRadius) &#123;</span><br><span class="line">            showAllChords();</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span><br><span class="line">            info.radius &gt; outerRadius ||</span><br><span class="line">            (info.radius &lt;= innerRadius &amp;&amp;</span><br><span class="line">              pmiChordMode.mode === PMI_CHORD_MODE_ONE_BIN_ALL_VARS &amp;&amp;</span><br><span class="line">              info.group === pmiChordMode.srcParam)</span><br><span class="line">          ) &#123;</span><br><span class="line">            <span class="keyword">if</span> (info.found) &#123;</span><br><span class="line">              model.renderState.pmiAllBinsTwoVars = <span class="literal">null</span>;</span><br><span class="line">              model.renderState.pmiOneBinAllVars = &#123;</span><br><span class="line">                <span class="attr">group</span>: info.group,</span><br><span class="line">                <span class="attr">bin</span>: info.bin,</span><br><span class="line">                d,</span><br><span class="line">                i,</span><br><span class="line">              &#125;;</span><br><span class="line">              drawPMIOneBinAllVars()(d, i);</span><br><span class="line">              publicAPI.selectStatusBarText();</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// &#125;,</span></span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">      .on(<span class="string">&#x27;dblclick&#x27;</span>, <span class="function"><span class="keyword">function</span> <span class="title">doubleClick</span>(<span class="params">d, i</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// double click handler</span></span><br><span class="line">        <span class="keyword">const</span> overCoords = d3.mouse(model.container);</span><br><span class="line">        <span class="keyword">const</span> info = findGroupAndBin(overCoords);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (info.found) &#123;</span><br><span class="line">          <span class="keyword">let</span> binMap = &#123;&#125;;</span><br><span class="line">          <span class="keyword">const</span> oneBinAllVarsMode =</span><br><span class="line">            info.radius &lt;= innerRadius &amp;&amp;</span><br><span class="line">            pmiChordMode.mode === PMI_CHORD_MODE_ONE_BIN_ALL_VARS;</span><br><span class="line">          <span class="keyword">if</span> (info.radius &lt;= innerRadius) &#123;</span><br><span class="line">            model.renderState.pmiHighlight = &#123;</span><br><span class="line">              <span class="attr">group</span>: info.group,</span><br><span class="line">              <span class="attr">bin</span>: info.bin,</span><br><span class="line">              <span class="attr">highlight</span>: <span class="literal">true</span>,</span><br><span class="line">              <span class="attr">mode</span>: oneBinAllVarsMode,</span><br><span class="line">            &#125;;</span><br><span class="line">            binMap = findPmiChordsToHighlight();</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span> (!oneBinAllVarsMode) &#123;</span><br><span class="line">            binMap[info.group] = [info.bin];</span><br><span class="line">          &#125;</span><br><span class="line">          updateActiveSelection(binMap);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        d3.event.stopPropagation();</span><br><span class="line">        <span class="comment">//   &#125;,</span></span><br><span class="line">        <span class="comment">// ])</span></span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="keyword">let</span> miChordsG = svg.select(<span class="string">&#x27;g.mutualInfoChords&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (miChordsG.empty()) &#123;</span><br><span class="line">      svg.append(<span class="string">&#x27;circle&#x27;</span>).attr(<span class="string">&#x27;r&#x27;</span>, outerRadius);</span><br><span class="line">      miChordsG = svg.append(<span class="string">&#x27;g&#x27;</span>).classed(<span class="string">&#x27;mutualInfoChords&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">      svg.append(<span class="string">&#x27;g&#x27;</span>).classed(<span class="string">&#x27;pmiChords&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// add a straight path so IE/Edge can measure text lengths usefully.</span></span><br><span class="line">      <span class="comment">// Otherwise, along a curved path, they return the horizontal space covered.</span></span><br><span class="line">      svg</span><br><span class="line">        .append(<span class="string">&#x27;defs&#x27;</span>)</span><br><span class="line">        .append(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line">        .attr(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;straight-text-path&#x27;</span>)</span><br><span class="line">        .attr(<span class="string">&#x27;d&#x27;</span>, <span class="string">`M0,0L<span class="subst">$&#123;width&#125;</span>,0`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Compute the chord layout.</span></span><br><span class="line">    layout.matrix(model.mutualInformationData.matrix);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get lookups for pmi chords</span></span><br><span class="line">    model.mutualInformationData.lkup = &#123;&#125;;</span><br><span class="line">    <span class="built_in">Object</span>.keys(model.mutualInformationData.vmap).forEach(<span class="function">(<span class="params">i</span>) =&gt;</span> &#123;</span><br><span class="line">      model.mutualInformationData.lkup[</span><br><span class="line">        model.mutualInformationData.vmap[i].name</span><br><span class="line">      ] = i;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Only used when there is no legend service</span></span><br><span class="line">    <span class="keyword">const</span> cmap = d3.scale.category20();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add a group per neighborhood.</span></span><br><span class="line">    <span class="keyword">const</span> group = svg</span><br><span class="line">      .selectAll(<span class="string">&#x27;.group&#x27;</span>)</span><br><span class="line">      <span class="comment">// set a key === field name, so groups are re-used. Need a fall-back for removed fields, though.</span></span><br><span class="line">      .data(layout.groups, <span class="function">(<span class="params">d</span>) =&gt;</span></span><br><span class="line">        model.mutualInformationData.vmap[d.index]</span><br><span class="line">          ? model.mutualInformationData.vmap[d.index].name</span><br><span class="line">          : d.index</span><br><span class="line">      );</span><br><span class="line">    <span class="keyword">const</span> groupEnter = group</span><br><span class="line">      .enter()</span><br><span class="line">      .append(<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">      .classed(<span class="string">&#x27;group&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">      .classed(style.group, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add the group arc.</span></span><br><span class="line">    groupEnter</span><br><span class="line">      .append(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line">      .attr(<span class="string">&#x27;id&#x27;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> <span class="string">`<span class="subst">$&#123;model.instanceID&#125;</span>-group<span class="subst">$&#123;i&#125;</span>`</span>);</span><br><span class="line">    <span class="comment">// add mouse-interaction arc - show where mouse affects this group&#x27;s chords.</span></span><br><span class="line">    groupEnter.append(<span class="string">&#x27;path&#x27;</span>).classed(style.mouseArcHidden, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add a text label.</span></span><br><span class="line">    <span class="keyword">const</span> groupText = groupEnter</span><br><span class="line">      .append(<span class="string">&#x27;text&#x27;</span>)</span><br><span class="line">      <span class="comment">// .attr(&#x27;x&#x27;, 6) // prevents ie11 from seeing text-anchor and startOffset.</span></span><br><span class="line">      .attr(<span class="string">&#x27;dy&#x27;</span>, <span class="number">15</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!model.textLengthMap) model.textLengthMap = &#123;&#125;;</span><br><span class="line">    groupText</span><br><span class="line">      .append(<span class="string">&#x27;textPath&#x27;</span>)</span><br><span class="line">      .attr(<span class="string">&#x27;startOffset&#x27;</span>, <span class="string">&#x27;25%&#x27;</span>)</span><br><span class="line">      .text(<span class="function">(<span class="params">d, i</span>) =&gt;</span> model.mutualInformationData.vmap[i].name);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// enter + update items.</span></span><br><span class="line">    <span class="keyword">const</span> groupPath = group.select(<span class="string">&#x27;path&#x27;</span>).attr(<span class="string">&#x27;d&#x27;</span>, arc);</span><br><span class="line">    group.select(<span class="string">`.<span class="subst">$&#123;style.jsMouseArc&#125;</span>`</span>).attr(<span class="string">&#x27;d&#x27;</span>, insideArc);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> textPath = group.select(<span class="string">&#x27;text&#x27;</span>).select(<span class="string">&#x27;textPath&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// pull a stunt to measure text length - use a straight path, then switch to the real curved one.</span></span><br><span class="line">    textPath</span><br><span class="line">      .filter(</span><br><span class="line">        <span class="function">(<span class="params">d</span>) =&gt;</span></span><br><span class="line">          !model.textLengthMap[model.mutualInformationData.vmap[d.index].name]</span><br><span class="line">      )</span><br><span class="line">      .text(<span class="function">(<span class="params">d</span>) =&gt;</span> model.mutualInformationData.vmap[d.index].name)</span><br><span class="line">      .attr(<span class="string">&#x27;xlink:href&#x27;</span>, <span class="string">&#x27;#straight-text-path&#x27;</span>)</span><br><span class="line">      .each(<span class="function"><span class="keyword">function</span> <span class="title">textLen</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">        model.textLengthMap[</span><br><span class="line">          model.mutualInformationData.vmap[d.index].name</span><br><span class="line">        ] = <span class="built_in">this</span>.getComputedTextLength();</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    textPath</span><br><span class="line">      .attr(<span class="string">&#x27;xlink:href&#x27;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> <span class="string">`#<span class="subst">$&#123;model.instanceID&#125;</span>-group<span class="subst">$&#123;d.index&#125;</span>`</span>)</span><br><span class="line">      <span class="comment">// Remove the labels that don&#x27;t fit, or shorten label, using ...</span></span><br><span class="line">      .each(<span class="function"><span class="keyword">function</span> <span class="title">truncate</span>(<span class="params">d, i</span>) </span>&#123;</span><br><span class="line">        d.textShown = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">const</span> availLength =</span><br><span class="line">          groupPath[<span class="number">0</span>][d.index].getTotalLength() / <span class="number">2</span> -</span><br><span class="line">          deltaRadius -</span><br><span class="line">          model.glyphSize;</span><br><span class="line">        <span class="comment">// shorten text based on string length vs initial total length.</span></span><br><span class="line">        <span class="keyword">const</span> fullText = model.mutualInformationData.vmap[i].name;</span><br><span class="line">        <span class="keyword">const</span> textLength = model.textLengthMap[fullText];</span><br><span class="line">        <span class="keyword">const</span> strLength = fullText.length;</span><br><span class="line">        <span class="comment">// we fit! done.</span></span><br><span class="line">        <span class="keyword">if</span> (textLength &lt;= availLength) &#123;</span><br><span class="line">          d3.select(<span class="built_in">this</span>).text(fullText);</span><br><span class="line">          d.textLength = textLength;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// if we don&#x27;t have 15 pixels left, or short string, don&#x27;t show label.</span></span><br><span class="line">        <span class="keyword">if</span> (availLength &lt; <span class="number">15</span> || strLength &lt; <span class="number">9</span>) &#123;</span><br><span class="line">          d.textShown = <span class="literal">false</span>;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// drop the middle 50%.</span></span><br><span class="line">        <span class="keyword">let</span> testStrLen = <span class="built_in">Math</span>.floor(strLength * <span class="number">0.25</span>);</span><br><span class="line">        <span class="comment">// estimate new length, +2 to account for adding &#x27;...&#x27;</span></span><br><span class="line">        d.textLength = ((testStrLen * <span class="number">2</span> + <span class="number">2</span>) / strLength) * textLength;</span><br><span class="line">        <span class="keyword">if</span> (d.textLength &lt; availLength) &#123;</span><br><span class="line">          d3.select(<span class="built_in">this</span>).text(</span><br><span class="line">            <span class="string">`<span class="subst">$&#123;fullText.slice(<span class="number">0</span>, testStrLen)&#125;</span>...<span class="subst">$&#123;fullText.slice(-testStrLen)&#125;</span>`</span></span><br><span class="line">          );</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// start at 1/3 of the string, go down to 3 chars plus ...</span></span><br><span class="line">        testStrLen = <span class="built_in">Math</span>.floor(strLength / <span class="number">2.99</span>);</span><br><span class="line">        <span class="keyword">while</span> (testStrLen &gt;= <span class="number">3</span>) &#123;</span><br><span class="line">          d.textLength = ((testStrLen + <span class="number">2</span>) / strLength) * textLength;</span><br><span class="line">          <span class="keyword">if</span> (d.textLength &lt; availLength) &#123;</span><br><span class="line">            d3.select(<span class="built_in">this</span>).text(<span class="string">`<span class="subst">$&#123;fullText.slice(<span class="number">0</span>, testStrLen)&#125;</span>...`</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          testStrLen -= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// small string doesn&#x27;t fit - hide.</span></span><br><span class="line">        d.textShown = <span class="literal">false</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">      .attr(<span class="string">&#x27;display&#x27;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> (d.textShown ? <span class="literal">null</span> : <span class="string">&#x27;none&#x27;</span>));</span><br><span class="line">    <span class="comment">// .remove(); ie11 throws errors if we use .remove() - hide instead.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add group for glyph, or assign color as fallback.</span></span><br><span class="line">    group.each(<span class="function"><span class="keyword">function</span> <span class="title">addLegend</span>(<span class="params">glyphData</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (getLegend) &#123;</span><br><span class="line">        <span class="keyword">let</span> glyph = d3.select(<span class="built_in">this</span>).select(<span class="string">&#x27;g.glyph&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (glyph.empty()) &#123;</span><br><span class="line">          glyph = d3</span><br><span class="line">            .select(<span class="built_in">this</span>)</span><br><span class="line">            .append(<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">            .classed(<span class="string">&#x27;glyph&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">            .classed(style.glyph, <span class="literal">true</span>);</span><br><span class="line">          glyph.append(<span class="string">&#x27;svg&#x27;</span>).append(<span class="string">&#x27;use&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> legend = getLegend(</span><br><span class="line">          model.mutualInformationData.vmap[glyphData.index].name</span><br><span class="line">        );</span><br><span class="line">        <span class="comment">// Add the glyph to the group</span></span><br><span class="line">        <span class="keyword">const</span> textLength = glyphData.textShown ? glyphData.textLength : <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">const</span> pathLength = groupPath[<span class="number">0</span>][glyphData.index].getTotalLength();</span><br><span class="line">        <span class="keyword">const</span> avgRadius = (innerRadius + outerRadius) / <span class="number">2</span>;</span><br><span class="line">        <span class="comment">// Start at edge of arc, move to text anchor, back up half of text length and glyph size</span></span><br><span class="line">        <span class="keyword">const</span> glyphAngle =</span><br><span class="line">          glyphData.startAngle +</span><br><span class="line">          (pathLength * <span class="number">0.25</span>) / outerRadius -</span><br><span class="line">          ((textLength + model.glyphSize) * <span class="number">0.5</span>) / avgRadius;</span><br><span class="line">        <span class="comment">// console.log(model.mutualInformationData.vmap[glyphData.index].name, textLength, pathLength, glyphAngle);</span></span><br><span class="line"></span><br><span class="line">        glyph</span><br><span class="line">          .attr(</span><br><span class="line">            <span class="string">&#x27;transform&#x27;</span>,</span><br><span class="line">            <span class="string">`translate(</span></span><br><span class="line"><span class="string">            <span class="subst">$&#123;avgRadius * <span class="built_in">Math</span>.sin(glyphAngle) - model.glyphSize / <span class="number">2</span>&#125;</span>,</span></span><br><span class="line"><span class="string">            <span class="subst">$&#123;-avgRadius * <span class="built_in">Math</span>.cos(glyphAngle) - model.glyphSize / <span class="number">2</span>&#125;</span>)`</span></span><br><span class="line">          )</span><br><span class="line">          .select(<span class="string">&#x27;svg&#x27;</span>)</span><br><span class="line">          .attr(<span class="string">&#x27;width&#x27;</span>, model.glyphSize)</span><br><span class="line">          .attr(<span class="string">&#x27;height&#x27;</span>, model.glyphSize)</span><br><span class="line">          .attr(<span class="string">&#x27;stroke&#x27;</span>, <span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">          .attr(<span class="string">&#x27;fill&#x27;</span>, legend.color)</span><br><span class="line">          .select(<span class="string">&#x27;use&#x27;</span>)</span><br><span class="line">          .attr(<span class="string">&#x27;xlink:href&#x27;</span>, legend.shape);</span><br><span class="line"></span><br><span class="line">        model.mutualInformationData.vmap[glyphData.index].color = legend.color;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Remove the glyphs that don&#x27;t fit</span></span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">          groupPath[<span class="number">0</span>][glyphData.index].getTotalLength() / <span class="number">2</span> - deltaRadius &lt;</span><br><span class="line">          model.glyphSize</span><br><span class="line">        ) &#123;</span><br><span class="line">          <span class="comment">// glyph.remove(); ie11 objects, hide instead.</span></span><br><span class="line">          glyph.attr(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;none&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        model.mutualInformationData.vmap[glyphData.index].color = cmap(</span><br><span class="line">          glyphData.index</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add the color to the group arc</span></span><br><span class="line">    group</span><br><span class="line">      .select(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line">      .style(</span><br><span class="line">        <span class="string">&#x27;fill&#x27;</span>,</span><br><span class="line">        <span class="function">(<span class="params">d</span>) =&gt;</span> model.mutualInformationData.vmap[d.index].color || <span class="string">&#x27;red&#x27;</span></span><br><span class="line">      );</span><br><span class="line">    group</span><br><span class="line">      .select(<span class="string">`.<span class="subst">$&#123;style.jsMouseArc&#125;</span>`</span>)</span><br><span class="line">      .style(</span><br><span class="line">        <span class="string">&#x27;fill&#x27;</span>,</span><br><span class="line">        <span class="function">(<span class="params">d</span>) =&gt;</span> model.mutualInformationData.vmap[d.index].color || <span class="string">&#x27;red&#x27;</span></span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getParamBinRange</span>(<span class="params">index, numberOfBins, paramName</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> paramRange = model.provider.getField(paramName).range;</span><br><span class="line">      <span class="keyword">return</span> getBinRange(index, numberOfBins, [</span><br><span class="line">        paramRange[<span class="number">0</span>],</span><br><span class="line">        paramRange[<span class="number">1</span>],</span><br><span class="line">        paramRange[<span class="number">1</span>] - paramRange[<span class="number">0</span>],</span><br><span class="line">      ]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getBinRange</span>(<span class="params">index, numberOfBins, paramRange</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> [</span><br><span class="line">        (index / numberOfBins) * paramRange[<span class="number">2</span>] + paramRange[<span class="number">0</span>],</span><br><span class="line">        ((index + <span class="number">1</span>) / numberOfBins) * paramRange[<span class="number">2</span>] + paramRange[<span class="number">0</span>],</span><br><span class="line">      ];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Zip histogram info into layout.groups() (which we initially have no control over as it is</span></span><br><span class="line">    <span class="comment">// generated for us).</span></span><br><span class="line">    group.each(<span class="function"><span class="keyword">function</span> <span class="title">buildHistogram</span>(<span class="params">groupData</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> gname = model.mutualInformationData.vmap[groupData.index].name;</span><br><span class="line">      <span class="keyword">const</span> gvar = model.histogramData[gname];</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!gvar) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">      groupData.range = [gvar.min, gvar.max, gvar.max - gvar.min];</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> delta =</span><br><span class="line">        (groupData.endAngle - groupData.startAngle) / gvar.counts.length;</span><br><span class="line">      <span class="keyword">const</span> total = <span class="built_in">Number</span>(gvar.counts.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b));</span><br><span class="line">      <span class="keyword">const</span> maxcnt = <span class="built_in">Number</span>(gvar.counts.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> (a &gt; b ? a : b)));</span><br><span class="line"></span><br><span class="line">      <span class="comment">/* eslint-disable arrow-body-style */</span></span><br><span class="line">      groupData.histo = gvar.counts.map(<span class="function">(<span class="params">d, i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="attr">startAngle</span>: i * delta + groupData.startAngle,</span><br><span class="line">          <span class="attr">endAngle</span>: (i + <span class="number">1</span>) * delta + groupData.startAngle,</span><br><span class="line">          <span class="attr">innerRadius</span>: outerRadius + <span class="number">10</span>,</span><br><span class="line">          <span class="attr">outerRadius</span>:</span><br><span class="line">            outerRadius + <span class="number">10</span> + (d / maxcnt) * (histoRadius - outerRadius),</span><br><span class="line">          <span class="attr">index</span>: i,</span><br><span class="line">          <span class="attr">value</span>: d / total,</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> htile = d3</span><br><span class="line">        .select(<span class="built_in">this</span>)</span><br><span class="line">        .attr(<span class="string">&#x27;param-name&#x27;</span>, gname)</span><br><span class="line">        .selectAll(<span class="string">&#x27;path.htile&#x27;</span>)</span><br><span class="line">        .data(groupData.histo);</span><br><span class="line">      htile.enter().append(<span class="string">&#x27;path&#x27;</span>).classed(<span class="string">&#x27;htile&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">      htile</span><br><span class="line">        .attr(<span class="string">&#x27;d&#x27;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> histoArc.outerRadius(d.outerRadius)(d))</span><br><span class="line">        .attr(<span class="string">&#x27;data-details&#x27;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> binRange = getBinRange(</span><br><span class="line">            i,</span><br><span class="line">            histogram1DnumberOfBins,</span><br><span class="line">            groupData.range</span><br><span class="line">          );</span><br><span class="line">          <span class="keyword">return</span> <span class="string">`p(<span class="subst">$&#123;gname&#125;</span> ∈ [<span class="subst">$&#123;formatVal(binRange[<span class="number">0</span>])&#125;</span>, <span class="subst">$&#123;formatVal(</span></span></span><br><span class="line"><span class="subst"><span class="string">            binRange[<span class="number">1</span>]</span></span></span><br><span class="line"><span class="subst"><span class="string">          )&#125;</span>]) = <span class="subst">$&#123;formatPercent(d.value)&#125;</span>`</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(<span class="string">&#x27;fill&#x27;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> (i % <span class="number">2</span> ? <span class="string">&#x27;#bebebe&#x27;</span> : <span class="string">&#x27;#a9a9a9&#x27;</span>));</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">showAllChords</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      pmiChordMode.mode = PMI_CHORD_MODE_NONE;</span><br><span class="line">      pmiChordMode.srcParam = <span class="literal">null</span>;</span><br><span class="line">      pmiChordMode.srcBin = <span class="literal">null</span>;</span><br><span class="line">      pmiChordMode.miIndex = -<span class="number">1</span>;</span><br><span class="line">      model.renderState = &#123;</span><br><span class="line">        <span class="attr">pmiAllBinsTwoVars</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">pmiOneBinAllVars</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">pmiHighlight</span>: <span class="literal">null</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">      updateChordVisibility(&#123; <span class="attr">mi</span>: &#123; <span class="attr">show</span>: <span class="literal">true</span> &#125; &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// do we need to reset?</span></span><br><span class="line">    <span class="keyword">const</span> groupExit = group.exit();</span><br><span class="line">    <span class="keyword">const</span> needReset = !groupEnter.empty() || !groupExit.empty();</span><br><span class="line">    groupExit.remove();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add the chords. Color only chords that show self-mutual-information.</span></span><br><span class="line">    <span class="keyword">const</span> chord = miChordsG.selectAll(<span class="string">&#x27;.chord&#x27;</span>).data(layout.chords);</span><br><span class="line">    chord</span><br><span class="line">      .enter()</span><br><span class="line">      .append(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line">      .classed(<span class="string">&#x27;chord&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">      .classed(style.chord, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    chord.exit().remove();</span><br><span class="line"></span><br><span class="line">    chord</span><br><span class="line">      .classed(<span class="string">&#x27;selfchord&#x27;</span>, <span class="function">(<span class="params">d</span>) =&gt;</span> d.source.index === d.target.index)</span><br><span class="line">      .attr(<span class="string">&#x27;d&#x27;</span>, path)</span><br><span class="line">      .style(<span class="string">&#x27;fill&#x27;</span>, <span class="literal">null</span>)</span><br><span class="line">      .on(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> &#123;</span><br><span class="line">        model.renderState.pmiOneBinAllVars = <span class="literal">null</span>;</span><br><span class="line">        model.renderState.pmiAllBinsTwoVars = &#123; d, i &#125;;</span><br><span class="line">        drawPMIAllBinsTwoVars();</span><br><span class="line">        publicAPI.selectStatusBarText();</span><br><span class="line">      &#125;)</span><br><span class="line">      .on(<span class="string">&#x27;mouseover&#x27;</span>, <span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params">d, i</span>) </span>&#123;</span><br><span class="line">        publicAPI.updateStatusBarText(d3.select(<span class="built_in">this</span>).attr(<span class="string">&#x27;data-details&#x27;</span>));</span><br><span class="line">      &#125;)</span><br><span class="line">      .on(<span class="string">&#x27;mouseout&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        publicAPI.updateStatusBarText(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    miChordsG</span><br><span class="line">      .selectAll(<span class="string">&#x27;.selfchord&#x27;</span>)</span><br><span class="line">      .style(</span><br><span class="line">        <span class="string">&#x27;fill&#x27;</span>,</span><br><span class="line">        <span class="function">(<span class="params">d</span>) =&gt;</span> model.mutualInformationData.vmap[d.source.index].color</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">    chord.attr(</span><br><span class="line">      <span class="string">&#x27;data-details&#x27;</span>,</span><br><span class="line">      <span class="function">(<span class="params">d, i</span>) =&gt;</span></span><br><span class="line">        <span class="string">`Mutual information: <span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">          model.mutualInformationData.vmap[d.source.index].name</span></span></span><br><span class="line"><span class="subst"><span class="string">        &#125;</span> ↔︎ <span class="subst">$&#123;model.mutualInformationData.vmap[d.target.index].name&#125;</span> `</span> +</span><br><span class="line">        <span class="string">`<span class="subst">$&#123;formatMI(</span></span></span><br><span class="line"><span class="subst"><span class="string">          model.mutualInformationData.matrix[d.source.index][d.target.index]</span></span></span><br><span class="line"><span class="subst"><span class="string">        )&#125;</span>`</span></span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// The lines below are for the case when the MI matrix has been row-normalized:</span></span><br><span class="line">    <span class="comment">// model.mutualInformationData.matrix[d.source.index][d.target.index] *</span></span><br><span class="line">    <span class="comment">// model.mutualInformationData.vmap[d.source.index].autoInfo/model.mutualInformationData.matrix[d.source.index][d.source.index]);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// after chord is defined.</span></span><br><span class="line">    <span class="keyword">if</span> (needReset) &#123;</span><br><span class="line">      showAllChords();</span><br><span class="line">      publicAPI.updateStatusBarText(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    svg</span><br><span class="line">      .selectAll(<span class="string">`g.group path[id^=\&#x27;<span class="subst">$&#123;model.instanceID&#125;</span>-group\&#x27;]`</span>)</span><br><span class="line">      .on(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">          pmiChordMode.mode !== PMI_CHORD_MODE_NONE ||</span><br><span class="line">          pmiChordMode.miIndex !== i</span><br><span class="line">        ) &#123;</span><br><span class="line">          pmiChordMode.mode = PMI_CHORD_MODE_NONE;</span><br><span class="line">          pmiChordMode.srcParam = <span class="literal">null</span>;</span><br><span class="line">          pmiChordMode.srcBin = <span class="literal">null</span>;</span><br><span class="line">          pmiChordMode.miIndex = i;</span><br><span class="line">          updateChordVisibility(&#123; <span class="attr">mi</span>: &#123; <span class="attr">show</span>: <span class="literal">true</span>, <span class="attr">index</span>: i &#125; &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          showAllChords();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      model.renderState.pmiAllBinsTwoVars !== <span class="literal">null</span> &amp;&amp;</span><br><span class="line">      pmiChordMode.mode === PMI_CHORD_MODE_ALL_BINS_TWO_VARS</span><br><span class="line">    ) &#123;</span><br><span class="line">      drawPMIAllBinsTwoVars();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span><br><span class="line">      model.renderState.pmiOneBinAllVars !== <span class="literal">null</span> &amp;&amp;</span><br><span class="line">      pmiChordMode.mode === PMI_CHORD_MODE_ONE_BIN_ALL_VARS</span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">group</span>: g, <span class="attr">bin</span>: b, d, i &#125; = model.renderState.pmiOneBinAllVars;</span><br><span class="line">      drawPMIOneBinAllVars(g, b)(d, i);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// only happens on &#x27;needReset&#x27;, above.</span></span><br><span class="line">      <span class="comment">// showAllChords();</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      model.renderState.pmiHighlight !== <span class="literal">null</span> &amp;&amp;</span><br><span class="line">      pmiChordMode.mode !== PMI_CHORD_MODE_NONE</span><br><span class="line">    ) &#123;</span><br><span class="line">      findPmiChordsToHighlight();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">drawPMIOneBinAllVars</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> binVar = model.renderState.pmiOneBinAllVars.group; <span class="comment">// Hold on to the name of the variable whose bin we should draw.</span></span><br><span class="line">      <span class="keyword">const</span> binIdx = model.renderState.pmiOneBinAllVars.bin;</span><br><span class="line"></span><br><span class="line">      pmiChordMode.mode = PMI_CHORD_MODE_ONE_BIN_ALL_VARS;</span><br><span class="line">      pmiChordMode.srcParam = binVar;</span><br><span class="line">      pmiChordMode.srcBin = binIdx;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Return a function that, given a bin datum, renders the highest PMI (or probability)</span></span><br><span class="line">      <span class="comment">// links from that bin to any/all other bins in other variables it co-occurs with.</span></span><br><span class="line">      <span class="keyword">return</span> <span class="function">(<span class="params">d, i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// Turn off MI rendering</span></span><br><span class="line">        chord.classed(<span class="string">&#x27;fade&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Turn on PMI rendering</span></span><br><span class="line">        <span class="keyword">let</span> linkAccum = [];</span><br><span class="line">        <span class="built_in">Object</span>.keys(model.mutualInformationData.vmap).forEach(<span class="function">(<span class="params">iother</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> other = model.mutualInformationData.vmap[iother];</span><br><span class="line">          <span class="keyword">let</span> va = binVar;</span><br><span class="line">          <span class="keyword">let</span> vb = other.name;</span><br><span class="line">          <span class="keyword">if</span> (!vb || vb === va) &#123;</span><br><span class="line">            <span class="keyword">return</span>; <span class="comment">// Can&#x27;t draw links to self...</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">let</span> swap = <span class="literal">false</span>;</span><br><span class="line">          <span class="keyword">if</span> (vb &lt; va) &#123;</span><br><span class="line">            <span class="keyword">const</span> tmp = vb;</span><br><span class="line">            vb = va;</span><br><span class="line">            va = tmp;</span><br><span class="line">            swap = <span class="literal">true</span>;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">const</span> cAB = downsample(</span><br><span class="line">            model.mutualInformationData.joint[va][vb],</span><br><span class="line">            histogram1DnumberOfBins,</span><br><span class="line">            swap</span><br><span class="line">          );</span><br><span class="line">          <span class="keyword">const</span> probDict = freqToProb(cAB);</span><br><span class="line">          <span class="keyword">const</span> linksToDraw = topBinPmi(probDict, <span class="literal">true</span>, binIdx, <span class="number">0.8</span>);</span><br><span class="line">          linkAccum = linkAccum.concat(</span><br><span class="line">            d3.zip(</span><br><span class="line">              linksToDraw.idx,</span><br><span class="line">              linksToDraw.pmi,</span><br><span class="line">              linksToDraw.pAB,</span><br><span class="line">              <span class="keyword">new</span> <span class="built_in">Array</span>(linksToDraw.idx.length).fill([binVar, other.name])</span><br><span class="line">            )</span><br><span class="line">          );</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Make mutual info chords invisible.</span></span><br><span class="line">        svg.selectAll(<span class="string">&#x27;g.group path.chord&#x27;</span>).classed(<span class="string">&#x27;fade&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> linkData = svg</span><br><span class="line">          .select(<span class="string">&#x27;g.pmiChords&#x27;</span>)</span><br><span class="line">          .selectAll(<span class="string">&#x27;path.pmiChord&#x27;</span>)</span><br><span class="line">          .data(linkAccum);</span><br><span class="line"></span><br><span class="line">        linkData</span><br><span class="line">          .enter()</span><br><span class="line">          .append(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line">          .classed(<span class="string">&#x27;pmiChord&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">          .classed(style.pmiChord, <span class="literal">true</span>);</span><br><span class="line">        linkData.exit().remove();</span><br><span class="line"></span><br><span class="line">        linkData</span><br><span class="line">          .classed(<span class="string">&#x27;fade&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">          .attr(<span class="string">&#x27;d&#x27;</span>, <span class="function">(<span class="params">data, index</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> vaGrp = layout.groups()[</span><br><span class="line">              model.mutualInformationData.lkup[data[<span class="number">3</span>][<span class="number">0</span>]]</span><br><span class="line">            ];</span><br><span class="line">            <span class="keyword">const</span> vbGrp = layout.groups()[</span><br><span class="line">              model.mutualInformationData.lkup[data[<span class="number">3</span>][<span class="number">1</span>]]</span><br><span class="line">            ];</span><br><span class="line">            <span class="keyword">const</span> vaRange = [</span><br><span class="line">              vaGrp.startAngle,</span><br><span class="line">              vaGrp.endAngle - vaGrp.startAngle,</span><br><span class="line">              (vaGrp.endAngle - vaGrp.startAngle) / histogram1DnumberOfBins,</span><br><span class="line">            ];</span><br><span class="line">            <span class="keyword">const</span> vbRange = [</span><br><span class="line">              vbGrp.startAngle,</span><br><span class="line">              vbGrp.endAngle - vbGrp.startAngle,</span><br><span class="line">              (vbGrp.endAngle - vbGrp.startAngle) / histogram1DnumberOfBins,</span><br><span class="line">            ];</span><br><span class="line">            <span class="keyword">return</span> path(&#123;</span><br><span class="line">              <span class="attr">source</span>: &#123;</span><br><span class="line">                <span class="attr">startAngle</span>: vaRange[<span class="number">0</span>] + data[<span class="number">0</span>][<span class="number">0</span>] * vaRange[<span class="number">2</span>],</span><br><span class="line">                <span class="attr">endAngle</span>: vaRange[<span class="number">0</span>] + (data[<span class="number">0</span>][<span class="number">0</span>] + <span class="number">1</span>) * vaRange[<span class="number">2</span>],</span><br><span class="line">              &#125;,</span><br><span class="line">              <span class="attr">target</span>: &#123;</span><br><span class="line">                <span class="attr">startAngle</span>: vbRange[<span class="number">0</span>] + data[<span class="number">0</span>][<span class="number">1</span>] * vbRange[<span class="number">2</span>],</span><br><span class="line">                <span class="attr">endAngle</span>: vbRange[<span class="number">0</span>] + (data[<span class="number">0</span>][<span class="number">1</span>] + <span class="number">1</span>) * vbRange[<span class="number">2</span>],</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;)</span><br><span class="line">          .attr(<span class="string">&#x27;data-source-name&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> data[<span class="number">3</span>][<span class="number">0</span>])</span><br><span class="line">          .attr(<span class="string">&#x27;data-source-bin&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> data[<span class="number">0</span>][<span class="number">0</span>])</span><br><span class="line">          .attr(<span class="string">&#x27;data-target-name&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> data[<span class="number">3</span>][<span class="number">1</span>])</span><br><span class="line">          .attr(<span class="string">&#x27;data-target-bin&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> data[<span class="number">0</span>][<span class="number">1</span>])</span><br><span class="line">          .classed(<span class="string">&#x27;highlight-pmi&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">          .classed(<span class="string">&#x27;positive&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> data[<span class="number">1</span>] &gt;= <span class="number">0.0</span>)</span><br><span class="line">          .classed(<span class="string">&#x27;negative&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> data[<span class="number">1</span>] &lt; <span class="number">0.0</span>)</span><br><span class="line">          .attr(<span class="string">&#x27;data-details&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> sourceBinRange = getParamBinRange(</span><br><span class="line">              data[<span class="number">0</span>][<span class="number">0</span>],</span><br><span class="line">              histogram1DnumberOfBins,</span><br><span class="line">              data[<span class="number">3</span>][<span class="number">0</span>]</span><br><span class="line">            );</span><br><span class="line">            <span class="keyword">const</span> targetBinRange = getParamBinRange(</span><br><span class="line">              data[<span class="number">0</span>][<span class="number">1</span>],</span><br><span class="line">              histogram1DnumberOfBins,</span><br><span class="line">              data[<span class="number">3</span>][<span class="number">1</span>]</span><br><span class="line">            );</span><br><span class="line">            <span class="keyword">return</span> (</span><br><span class="line">              <span class="string">&#x27;PMI: &#x27;</span> +</span><br><span class="line">              <span class="string">`<span class="subst">$&#123;data[<span class="number">3</span>][<span class="number">0</span>]&#125;</span> ∈ [ <span class="subst">$&#123;formatVal(sourceBinRange[<span class="number">0</span>])&#125;</span>, <span class="subst">$&#123;formatVal(</span></span></span><br><span class="line"><span class="subst"><span class="string">                sourceBinRange[<span class="number">1</span>]</span></span></span><br><span class="line"><span class="subst"><span class="string">              )&#125;</span>] ↔︎ `</span> +</span><br><span class="line">              <span class="string">`<span class="subst">$&#123;data[<span class="number">3</span>][<span class="number">1</span>]&#125;</span> ∈ [ <span class="subst">$&#123;formatVal(targetBinRange[<span class="number">0</span>])&#125;</span>, <span class="subst">$&#123;formatVal(</span></span></span><br><span class="line"><span class="subst"><span class="string">                targetBinRange[<span class="number">1</span>]</span></span></span><br><span class="line"><span class="subst"><span class="string">              )&#125;</span>] <span class="subst">$&#123;formatMI(data[<span class="number">1</span>])&#125;</span>`</span></span><br><span class="line">            );</span><br><span class="line">          &#125;)</span><br><span class="line">          .on(<span class="string">&#x27;mouseover&#x27;</span>, <span class="function"><span class="keyword">function</span> <span class="title">mouseOver</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            publicAPI.updateStatusBarText(d3.select(<span class="built_in">this</span>).attr(<span class="string">&#x27;data-details&#x27;</span>));</span><br><span class="line">          &#125;)</span><br><span class="line">          .on(<span class="string">&#x27;mouseout&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            publicAPI.updateStatusBarText(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">          &#125;)</span><br><span class="line">          .on(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            publicAPI.selectStatusBarText();</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleHoverUpdate</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> svg = d3.select(model.container);</span><br><span class="line">    <span class="built_in">Object</span>.keys(data.state).forEach(<span class="function">(<span class="params">pName</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> binList = data.state[pName];</span><br><span class="line">      svg</span><br><span class="line">        .selectAll(<span class="string">`g.group[param-name=&#x27;<span class="subst">$&#123;pName&#125;</span>&#x27;] &gt; path.htile`</span>)</span><br><span class="line">        .classed(</span><br><span class="line">          <span class="string">&#x27;hilite&#x27;</span>,</span><br><span class="line">          <span class="function">(<span class="params">d, i</span>) =&gt;</span> binList.indexOf(-<span class="number">1</span>) === -<span class="number">1</span> &amp;&amp; binList.indexOf(i) &gt;= <span class="number">0</span></span><br><span class="line">        );</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Make sure default values get applied</span></span><br><span class="line">  publicAPI.setContainer(model.container);</span><br><span class="line"></span><br><span class="line">  model.subscriptions.push(&#123; <span class="attr">unsubscribe</span>: publicAPI.setContainer &#125;);</span><br><span class="line">  model.subscriptions.push(</span><br><span class="line">    model.provider.onFieldChange(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      model.renderState = &#123;</span><br><span class="line">        <span class="attr">pmiAllBinsTwoVars</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">pmiOneBinAllVars</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">pmiHighlight</span>: <span class="literal">null</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">if</span> (model.provider.setMutualInformationParameterNames) &#123;</span><br><span class="line">        model.provider.setMutualInformationParameterNames(</span><br><span class="line">          model.provider.getActiveFieldNames()</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (model.provider.isA(<span class="string">&#x27;Histogram1DProvider&#x27;</span>)) &#123;</span><br><span class="line">    model.histogram1DDataSubscription = model.provider.subscribeToHistogram1D(</span><br><span class="line">      <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        model.histogramData = data;</span><br><span class="line">        publicAPI.render();</span><br><span class="line">      &#125;,</span><br><span class="line">      model.provider.getFieldNames(),</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">numberOfBins</span>: model.numberOfBins,</span><br><span class="line">        <span class="attr">partial</span>: <span class="literal">false</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    model.subscriptions.push(model.histogram1DDataSubscription);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (model.provider.isA(<span class="string">&#x27;MutualInformationProvider&#x27;</span>)) &#123;</span><br><span class="line">    model.mutualInformationDataSubscription = model.provider.onMutualInformationReady(</span><br><span class="line">      <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        model.mutualInformationData = data;</span><br><span class="line">        publicAPI.render();</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    model.subscriptions.push(model.mutualInformationDataSubscription);</span><br><span class="line">    model.provider.setMutualInformationParameterNames(</span><br><span class="line">      model.provider.getActiveFieldNames()</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (model.provider.isA(<span class="string">&#x27;HistogramBinHoverProvider&#x27;</span>)) &#123;</span><br><span class="line">    model.subscriptions.push(</span><br><span class="line">      model.provider.onHoverBinChange(handleHoverUpdate)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (model.provider.isA(<span class="string">&#x27;SelectionProvider&#x27;</span>)) &#123;</span><br><span class="line">    model.subscriptions.push(</span><br><span class="line">      model.provider.onAnnotationChange(<span class="function">(<span class="params">annotation</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">          lastAnnotationPushed &amp;&amp;</span><br><span class="line">          annotation.selection.type === <span class="string">&#x27;range&#x27;</span> &amp;&amp;</span><br><span class="line">          annotation.id === lastAnnotationPushed.id &amp;&amp;</span><br><span class="line">          annotation.generation === lastAnnotationPushed.generation + <span class="number">1</span></span><br><span class="line">        ) &#123;</span><br><span class="line">          <span class="comment">// Assume that it is still ours but edited by someone else</span></span><br><span class="line">          lastAnnotationPushed = annotation;</span><br><span class="line">          <span class="comment">// Capture the score and update our default</span></span><br><span class="line">          model.defaultScore = lastAnnotationPushed.score[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">// Object factory</span></span><br><span class="line"><span class="comment">// ----------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> DEFAULT_VALUES = &#123;</span><br><span class="line">  <span class="attr">container</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">provider</span>: <span class="literal">null</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">needData</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">glyphSize</span>: <span class="number">15</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">statusBarVisible</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">useAnnotation</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">defaultScore</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">defaultWeight</span>: <span class="number">1</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">numberOfBins</span>: <span class="number">32</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ----------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">publicAPI, model, initialValues = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">Object</span>.assign(model, DEFAULT_VALUES, initialValues);</span><br><span class="line"></span><br><span class="line">  CompositeClosureHelper.destroy(publicAPI, model);</span><br><span class="line">  CompositeClosureHelper.isA(publicAPI, model, <span class="string">&#x27;VizComponent&#x27;</span>);</span><br><span class="line">  CompositeClosureHelper.get(publicAPI, model, [</span><br><span class="line">    <span class="string">&#x27;provider&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;container&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;numberOfBins&#x27;</span>,</span><br><span class="line">  ]);</span><br><span class="line">  CompositeClosureHelper.set(publicAPI, model, [<span class="string">&#x27;numberOfBins&#x27;</span>]);</span><br><span class="line">  CompositeClosureHelper.dynamicArray(publicAPI, model, <span class="string">&#x27;readOnlyFields&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  informationDiagram(publicAPI, model);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ----------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> newInstance = CompositeClosureHelper.newInstance(extend);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ----------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123; newInstance, extend &#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>utils.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// -----------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">// -- Private utility methods for dealing with joint (2d) probability distributions --</span></span><br><span class="line"><span class="comment">// -----------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">constantMatrix</span>(<span class="params">ii, jj, entry</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> arr = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; ii; ++i) &#123;</span><br><span class="line">    arr.push([]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; jj; ++j) &#123;</span><br><span class="line">      arr[i].push(<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">zeros</span>(<span class="params">ii, jj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> constantMatrix(ii, jj, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">downsample</span>(<span class="params">src, nn, swap</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> hsz = src ? src.length : <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> arr;</span><br><span class="line">  <span class="keyword">if</span> (hsz === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (nn &lt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// assert(hsz === src[0].length);</span></span><br><span class="line">  <span class="keyword">let</span> tn = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (tn &lt; nn &amp;&amp; tn &lt; hsz) &#123;</span><br><span class="line">    tn *= <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> stride = hsz / tn;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (stride === <span class="number">1</span> &amp;&amp; !swap) &#123;</span><br><span class="line">    arr = src;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    arr = zeros(tn, tn);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; hsz; ++i) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; hsz; ++j) &#123;</span><br><span class="line">        arr[<span class="built_in">Math</span>.floor(i / stride)][<span class="built_in">Math</span>.floor(j / stride)] += src[i][j];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (swap) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; tn; ++i) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; tn; ++j) &#123;</span><br><span class="line">        <span class="keyword">const</span> tmp = arr[i][j];</span><br><span class="line">        arr[i][j] = arr[j][i];</span><br><span class="line">        arr[j][i] = tmp;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">freqToProb</span>(<span class="params">src</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> hsz = src ? src.length : <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (hsz === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// assert(hsz === src[0].length);</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> total = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; hsz; ++i) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; hsz; ++j) &#123;</span><br><span class="line">      total += src[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> pAB = zeros(hsz, hsz);</span><br><span class="line">  <span class="keyword">const</span> pA = zeros(hsz, <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">const</span> pB = zeros(<span class="number">1</span>, hsz);</span><br><span class="line">  <span class="keyword">const</span> pmi = constantMatrix(hsz, hsz, <span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; hsz; ++i) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; hsz; ++j) &#123;</span><br><span class="line">      <span class="keyword">const</span> p = src[i][j] / total;</span><br><span class="line">      pAB[i][j] = p;</span><br><span class="line">      pA[i][<span class="number">0</span>] += p;</span><br><span class="line">      pB[<span class="number">0</span>][j] += p;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; hsz; ++i) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; hsz; ++j) &#123;</span><br><span class="line">      <span class="keyword">const</span> pj = pAB[i][j];</span><br><span class="line">      <span class="keyword">if</span> (pj &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        pmi[i][j] = (-<span class="number">1</span> * <span class="built_in">Math</span>.log(pj / pA[i][<span class="number">0</span>] / pB[<span class="number">0</span>][j])) / <span class="built_in">Math</span>.log(pj);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; pAB, pA, pB, <span class="attr">cardinality</span>: total, pmi &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">flattenMatrix</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.concat(b));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">quantile</span>(<span class="params">xx, qq</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> xs = flattenMatrix(xx).sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line">  <span class="keyword">return</span> (xs[<span class="built_in">Math</span>.floor(xs.length * qq)] + xs[<span class="built_in">Math</span>.ceil(xs.length * qq)]) / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">matrixFind</span>(<span class="params">xx, condition</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!xx || xx.length &lt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> nn = xx[<span class="number">0</span>].length;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> xf = flattenMatrix(xx).reduce(</span><br><span class="line">    <span class="function">(<span class="params">a, b, i</span>) =&gt;</span></span><br><span class="line">      condition(b, i) ? a.concat([[<span class="built_in">Math</span>.floor(i / nn), i % nn]]) : a,</span><br><span class="line">    []</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> xf;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">matrixSubset</span>(<span class="params">mat, isRow, idx</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isRow) &#123;</span><br><span class="line">    <span class="keyword">return</span> [mat[idx]]; <span class="comment">// return a &quot;new&quot; matrix that has only one row.</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> mat.map(<span class="function">(<span class="params">row</span>) =&gt;</span> [row[idx]]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">matrixChoose</span>(<span class="params">xx, idxs</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> idxs.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.concat(xx[b[<span class="number">0</span>]][b[<span class="number">1</span>]]), []);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">topProb</span>(<span class="params">dd, qq</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> qval = quantile(dd.pAB, qq);</span><br><span class="line">  <span class="keyword">const</span> idxs = matrixFind(dd.pAB, <span class="function">(<span class="params">d</span>) =&gt;</span> d &gt; qval);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">pAB</span>: matrixChoose(dd.pAB, idxs),</span><br><span class="line">    <span class="attr">pmi</span>: matrixChoose(dd.pmi, idxs),</span><br><span class="line">    <span class="attr">idx</span>: idxs,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">topPmi</span>(<span class="params">dd, qq</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> apmi = dd.pmi.map(<span class="function">(<span class="params">row</span>) =&gt;</span> row.map(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">Math</span>.abs(v)));</span><br><span class="line">  <span class="keyword">const</span> qval = quantile(apmi, qq);</span><br><span class="line">  <span class="keyword">const</span> idxs = matrixFind(apmi, <span class="function">(<span class="params">d</span>) =&gt;</span> d &gt; qval);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">pAB</span>: matrixChoose(dd.pAB, idxs),</span><br><span class="line">    <span class="attr">pmi</span>: matrixChoose(dd.pmi, idxs),</span><br><span class="line">    <span class="attr">idx</span>: idxs,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Return the bins most probably linked to the given bin (above the \a qq quantile line of probability).</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">topBinProb</span>(<span class="params">dd, isA, bin, qq</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> subset = matrixSubset(dd.pAB, !isA, bin);</span><br><span class="line">  <span class="keyword">const</span> qval = quantile(subset, qq);</span><br><span class="line">  <span class="keyword">const</span> idxs = matrixFind(subset, <span class="function">(<span class="params">d</span>) =&gt;</span> d &gt; qval);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(</span><br><span class="line">    <span class="string">&#x27;binprob, isA:&#x27;</span>,</span><br><span class="line">    isA,</span><br><span class="line">    <span class="string">&#x27; bin:&#x27;</span>,</span><br><span class="line">    bin,</span><br><span class="line">    <span class="string">&#x27; idxs:&#x27;</span>,</span><br><span class="line">    idxs,</span><br><span class="line">    <span class="string">&#x27; midx: &#x27;</span>,</span><br><span class="line">    idxs.map(<span class="function">(<span class="params">d</span>) =&gt;</span> (!isA ? [bin, d[<span class="number">1</span>]] : [bin, d[<span class="number">0</span>]])),</span><br><span class="line">    <span class="string">&#x27; subset: &#x27;</span>,</span><br><span class="line">    subset</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">pAB</span>: matrixChoose(subset, idxs),</span><br><span class="line">    <span class="attr">pmi</span>: matrixChoose(matrixSubset(dd.pmi, !isA, bin), idxs),</span><br><span class="line">    <span class="attr">idx</span>: idxs.map(<span class="function">(<span class="params">d</span>) =&gt;</span> (!isA ? [bin, d[<span class="number">1</span>]] : [bin, d[<span class="number">0</span>]])),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">topBinPmi</span>(<span class="params">dd, isA, bin, qq</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> subset = matrixSubset(dd.pmi, !isA, bin);</span><br><span class="line">  <span class="keyword">const</span> apmi = subset.map(<span class="function">(<span class="params">row</span>) =&gt;</span> row.map(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">Math</span>.abs(v)));</span><br><span class="line">  <span class="keyword">const</span> qval = quantile(apmi, qq);</span><br><span class="line">  <span class="keyword">const</span> idxs = matrixFind(apmi, <span class="function">(<span class="params">d</span>) =&gt;</span> d &gt; qval);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">pAB</span>: matrixChoose(matrixSubset(dd.pAB, !isA, bin), idxs),</span><br><span class="line">    <span class="attr">pmi</span>: matrixChoose(subset, idxs),</span><br><span class="line">    <span class="attr">idx</span>: idxs.map(<span class="function">(<span class="params">d</span>) =&gt;</span> (!isA ? [bin, d[<span class="number">1</span>]] : [bin, d[<span class="number">0</span>]])),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">calculateAngleAndRadius</span>(<span class="params">coords, containerDims</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> width = containerDims[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">const</span> height = containerDims[<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">const</span> x = coords[<span class="number">0</span>] - width / <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">const</span> y = height - coords[<span class="number">1</span>] - height / <span class="number">2</span>;</span><br><span class="line">  <span class="comment">// Need straight up in screen space to have angle 0, adjust atan2 args accordingly</span></span><br><span class="line">  <span class="keyword">let</span> arctangent = -<span class="built_in">Math</span>.atan2(-x, y);</span><br><span class="line">  <span class="keyword">if</span> (arctangent &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    arctangent = <span class="built_in">Math</span>.PI + (<span class="built_in">Math</span>.PI + arctangent);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> [arctangent, <span class="built_in">Math</span>.sqrt(x * x + y * y)];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  calculateAngleAndRadius,</span><br><span class="line">  constantMatrix,</span><br><span class="line">  downsample,</span><br><span class="line">  flattenMatrix,</span><br><span class="line">  freqToProb,</span><br><span class="line">  matrixChoose,</span><br><span class="line">  matrixFind,</span><br><span class="line">  matrixSubset,</span><br><span class="line">  quantile,</span><br><span class="line">  topBinPmi,</span><br><span class="line">  topBinProb,</span><br><span class="line">  topPmi,</span><br><span class="line">  topProb,</span><br><span class="line">  zeros,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2022-01-31T01:59:37.200Z" itemprop="dateModified">Last updated: 2022-01-31</time>
                <a href="InfoViz_Native_HistogramSelector.html" class="article-footer-prev" title="HistogramSelector"><i class="fa fa-chevron-left"></i><span>Prev</span></a><a href="InfoViz_Native_ParallelCoordinates.html" class="article-footer-next" title="ParallelCoordinates"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Source"><span class="toc-text">Source</span></a></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner"><strong class="sidebar-title">Common/Core</strong><a href="Common_Core_CompositeClosureHelper.html" class="sidebar-link">CompositeClosureHelper</a><a href="Common_Core_LookupTable.html" class="sidebar-link">LookupTable</a><a href="Common_Core_LookupTableManager.html" class="sidebar-link">LookupTableManager</a><strong class="sidebar-title">Common/Misc</strong><a href="Common_Misc_AnnotationBuilder.html" class="sidebar-link">AnnotationBuilder</a><a href="Common_Misc_BusyMonitor.html" class="sidebar-link">BusyMonitor</a><a href="Common_Misc_CanvasOffscreenBuffer.html" class="sidebar-link">CanvasOffscreenBuffer</a><a href="Common_Misc_ColorPalettes.html" class="sidebar-link">ColorPalettes</a><a href="Common_Misc_Convert.html" class="sidebar-link">Convert</a><a href="Common_Misc_ConvertProxyProperty.html" class="sidebar-link">ConvertProxyProperty</a><a href="Common_Misc_Debounce.html" class="sidebar-link">Debounce</a><a href="Common_Misc_ImageExporter.html" class="sidebar-link">ImageExporter</a><a href="Common_Misc_Loop.html" class="sidebar-link">Loop</a><a href="Common_Misc_NumberFormatter.html" class="sidebar-link">NumberFormatter</a><a href="Common_Misc_Observable.html" class="sidebar-link">Observable</a><a href="Common_Misc_PingPong.html" class="sidebar-link">PingPong</a><a href="Common_Misc_SelectionBuilder.html" class="sidebar-link">SelectionBuilder</a><a href="Common_Misc_SizeHelper.html" class="sidebar-link">SizeHelper</a><a href="Common_Misc_TimeProbeManager.html" class="sidebar-link">TimeProbeManager</a><a href="Common_Misc_URLExtract.html" class="sidebar-link">URLExtract</a><a href="Common_Misc_UUID.html" class="sidebar-link">UUID</a><a href="Common_Misc_Validate.html" class="sidebar-link">Validate</a><a href="Common_Misc_WebGl.html" class="sidebar-link">WebGl</a><strong class="sidebar-title">Common/State</strong><a href="Common_State_EqualizerState.html" class="sidebar-link">EqualizerState</a><a href="Common_State_PipelineState.html" class="sidebar-link">PipelineState</a><a href="Common_State_ToggleState.html" class="sidebar-link">ToggleState</a><strong class="sidebar-title">Component/Native</strong><a href="Component_Native_BackgroundColor.html" class="sidebar-link">BackgroundColor</a><a href="Component_Native_Composite.html" class="sidebar-link">Composite</a><a href="Component_Native_Spacer.html" class="sidebar-link">Spacer</a><a href="Component_Native_ToggleControl.html" class="sidebar-link">ToggleControl</a><a href="Component_Native_Workbench.html" class="sidebar-link">Workbench</a><strong class="sidebar-title">Component/React</strong><a href="Component_React_ComponentToReact.html" class="sidebar-link">ComponentToReact</a><a href="Component_React_ReactAdapter.html" class="sidebar-link">ReactAdapter</a><a href="Component_React_WorkbenchController.html" class="sidebar-link">WorkbenchController</a><strong class="sidebar-title">InfoViz/Core</strong><a href="InfoViz_Core_AnnotationStoreProvider.html" class="sidebar-link">AnnotationStoreProvider</a><a href="InfoViz_Core_D3MultiClick.html" class="sidebar-link">D3MultiClick</a><a href="InfoViz_Core_FieldProvider.html" class="sidebar-link">FieldProvider</a><a href="InfoViz_Core_Histogram1DProvider.html" class="sidebar-link">Histogram1DProvider</a><a href="InfoViz_Core_Histogram2DProvider.html" class="sidebar-link">Histogram2DProvider</a><a href="InfoViz_Core_HistogramBinHoverProvider.html" class="sidebar-link">HistogramBinHoverProvider</a><a href="InfoViz_Core_LegendProvider.html" class="sidebar-link">LegendProvider</a><a href="InfoViz_Core_MutualInformationProvider.html" class="sidebar-link">MutualInformationProvider</a><a href="InfoViz_Core_PersistentStateProvider.html" class="sidebar-link">PersistentStateProvider</a><a href="InfoViz_Core_ScoresProvider.html" class="sidebar-link">ScoresProvider</a><a href="InfoViz_Core_SelectionProvider.html" class="sidebar-link">SelectionProvider</a><strong class="sidebar-title">InfoViz/Native</strong><a href="InfoViz_Native_FieldSelector.html" class="sidebar-link">FieldSelector</a><a href="InfoViz_Native_HistogramSelector.html" class="sidebar-link">HistogramSelector</a><a href="InfoViz_Native_MutualInformationDiagram.html" class="sidebar-link current">MutualInformationDiagram</a><a href="InfoViz_Native_ParallelCoordinates.html" class="sidebar-link">ParallelCoordinates</a><strong class="sidebar-title">Interaction/Core</strong><a href="Interaction_Core_MouseHandler.html" class="sidebar-link">MouseHandler</a><a href="Interaction_Core_VtkWebMouseListener.html" class="sidebar-link">VtkWebMouseListener</a><strong class="sidebar-title">IO/Core</strong><a href="IO_Core_CSVReader.html" class="sidebar-link">CSVReader</a><a href="IO_Core_DataManager.html" class="sidebar-link">DataManager</a><a href="IO_Core_GeometryDataModel.html" class="sidebar-link">GeometryDataModel</a><a href="IO_Core_ProcessLauncher.html" class="sidebar-link">ProcessLauncher</a><a href="IO_Core_QueryDataModel.html" class="sidebar-link">QueryDataModel</a><a href="IO_Core_VTKGeometryDataModel.html" class="sidebar-link">VTKGeometryDataModel</a><a href="IO_Core_VTKImageDataModel.html" class="sidebar-link">VTKImageDataModel</a><a href="IO_Core_VTKSLICDataModel.html" class="sidebar-link">VTKSLICDataModel</a><strong class="sidebar-title">IO/Girder</strong><a href="IO_Girder_CoreEndpoints.html" class="sidebar-link">CoreEndpoints</a><a href="IO_Girder_GirderClientBuilder.html" class="sidebar-link">GirderClientBuilder</a><strong class="sidebar-title">IO/WebSocket</strong><a href="IO_WebSocket_BinaryImageStream.html" class="sidebar-link">BinaryImageStream</a><a href="IO_WebSocket_ParaViewWebClient.html" class="sidebar-link">ParaViewWebClient</a><a href="IO_WebSocket_WslinkImageStream.html" class="sidebar-link">WslinkImageStream</a><strong class="sidebar-title">NativeUI/Canvas</strong><a href="NativeUI_Canvas_GaussianPieceWiseEditor.html" class="sidebar-link">GaussianPieceWiseEditor</a><a href="NativeUI_Canvas_LinearPieceWiseEditor.html" class="sidebar-link">LinearPieceWiseEditor</a><a href="NativeUI_Canvas_RemoteRenderer.html" class="sidebar-link">RemoteRenderer</a><strong class="sidebar-title">NativeUI/Renderers</strong><a href="NativeUI_Renderers_NativeImageRenderer.html" class="sidebar-link">NativeImageRenderer</a><a href="NativeUI_Renderers_RemoteRendererStatsTable.html" class="sidebar-link">RemoteRendererStatsTable</a><a href="NativeUI_Renderers_VtkRenderer.html" class="sidebar-link">VtkRenderer</a><strong class="sidebar-title">React/CollapsibleControls</strong><a href="React_CollapsibleControls_CollapsibleControlFactory.html" class="sidebar-link">CollapsibleControlFactory</a><a href="React_CollapsibleControls_FloatImageControl.html" class="sidebar-link">FloatImageControl</a><a href="React_CollapsibleControls_LightControl.html" class="sidebar-link">LightControl</a><a href="React_CollapsibleControls_LookupTableManagerControl.html" class="sidebar-link">LookupTableManagerControl</a><a href="React_CollapsibleControls_MultiViewControl.html" class="sidebar-link">MultiViewControl</a><a href="React_CollapsibleControls_PixelOperatorControl.html" class="sidebar-link">PixelOperatorControl</a><a href="React_CollapsibleControls_PlotlyChartControl.html" class="sidebar-link">PlotlyChartControl</a><a href="React_CollapsibleControls_ProbeControl.html" class="sidebar-link">ProbeControl</a><a href="React_CollapsibleControls_QueryDataModelControl.html" class="sidebar-link">QueryDataModelControl</a><a href="React_CollapsibleControls_TimeFloatImageControl.html" class="sidebar-link">TimeFloatImageControl</a><a href="React_CollapsibleControls_VolumeControl.html" class="sidebar-link">VolumeControl</a><strong class="sidebar-title">React/Containers</strong><a href="React_Containers_OverlayWindow.html" class="sidebar-link">OverlayWindow</a><strong class="sidebar-title">React/Properties</strong><a href="React_Properties_CellProperty.html" class="sidebar-link">CellProperty</a><a href="React_Properties_CheckboxProperty.html" class="sidebar-link">CheckboxProperty</a><a href="React_Properties_CollapsiblePropertyGroup.html" class="sidebar-link">CollapsiblePropertyGroup</a><a href="React_Properties_ColorProperty.html" class="sidebar-link">ColorProperty</a><a href="React_Properties_EnumProperty.html" class="sidebar-link">EnumProperty</a><a href="React_Properties_MapProperty.html" class="sidebar-link">MapProperty</a><a href="React_Properties_PropertyFactory.html" class="sidebar-link">PropertyFactory</a><a href="React_Properties_PropertyGroup.html" class="sidebar-link">PropertyGroup</a><a href="React_Properties_PropertyPanel.html" class="sidebar-link">PropertyPanel</a><a href="React_Properties_SliderProperty.html" class="sidebar-link">SliderProperty</a><strong class="sidebar-title">React/Renderers</strong><a href="React_Renderers_GeometryRenderer.html" class="sidebar-link">GeometryRenderer</a><a href="React_Renderers_ImageRenderer.html" class="sidebar-link">ImageRenderer</a><a href="React_Renderers_MultiLayoutRenderer.html" class="sidebar-link">MultiLayoutRenderer</a><a href="React_Renderers_PlotlyRenderer.html" class="sidebar-link">PlotlyRenderer</a><a href="React_Renderers_VtkGeometryRenderer.html" class="sidebar-link">VtkGeometryRenderer</a><a href="React_Renderers_VtkRenderer.html" class="sidebar-link">VtkRenderer</a><strong class="sidebar-title">React/ToggleTools</strong><a href="React_ToggleTools_AnnotationEditor.html" class="sidebar-link">AnnotationEditor</a><a href="React_ToggleTools_FieldSelector.html" class="sidebar-link">FieldSelector</a><a href="React_ToggleTools_ParallelCoordinates.html" class="sidebar-link">ParallelCoordinates</a><a href="React_ToggleTools_ScatterPlotControl.html" class="sidebar-link">ScatterPlotControl</a><a href="React_ToggleTools_WorkbenchLayout.html" class="sidebar-link">WorkbenchLayout</a><strong class="sidebar-title">React/Viewers</strong><a href="React_Viewers_AbstractViewerMenu.html" class="sidebar-link">AbstractViewerMenu</a><a href="React_Viewers_ChartViewer.html" class="sidebar-link">ChartViewer</a><a href="React_Viewers_GeometryViewer.html" class="sidebar-link">GeometryViewer</a><a href="React_Viewers_ImageBuilderViewer.html" class="sidebar-link">ImageBuilderViewer</a><a href="React_Viewers_LineChartViewer.html" class="sidebar-link">LineChartViewer</a><a href="React_Viewers_MultiLayoutViewer.html" class="sidebar-link">MultiLayoutViewer</a><a href="React_Viewers_Probe3DViewer.html" class="sidebar-link">Probe3DViewer</a><strong class="sidebar-title">React/Widgets</strong><a href="React_Widgets_ActionListWidget.html" class="sidebar-link">ActionListWidget</a><a href="React_Widgets_AnnotationEditorWidget.html" class="sidebar-link">AnnotationEditorWidget</a><a href="React_Widgets_AnnotationStoreEditorWidget.html" class="sidebar-link">AnnotationStoreEditorWidget</a><a href="React_Widgets_BusyFeedback.html" class="sidebar-link">BusyFeedback</a><a href="React_Widgets_ButtonSelectorWidget.html" class="sidebar-link">ButtonSelectorWidget</a><a href="React_Widgets_CollapsibleWidget.html" class="sidebar-link">CollapsibleWidget</a><a href="React_Widgets_ColorByWidget.html" class="sidebar-link">ColorByWidget</a><a href="React_Widgets_ColorMapEditorWidget.html" class="sidebar-link">ColorMapEditorWidget</a><a href="React_Widgets_ColorPickerWidget.html" class="sidebar-link">ColorPickerWidget</a><a href="React_Widgets_CompositePipelineWidget.html" class="sidebar-link">CompositePipelineWidget</a><a href="React_Widgets_ContentEditableWidget.html" class="sidebar-link">ContentEditableWidget</a><a href="React_Widgets_Coordinate2DWidget.html" class="sidebar-link">Coordinate2DWidget</a><a href="React_Widgets_CountToolbar.html" class="sidebar-link">CountToolbar</a><a href="React_Widgets_DoubleSliderWidget.html" class="sidebar-link">DoubleSliderWidget</a><a href="React_Widgets_DropDownWidget.html" class="sidebar-link">DropDownWidget</a><a href="React_Widgets_EditableListWidget.html" class="sidebar-link">EditableListWidget</a><a href="React_Widgets_EqualizerWidget.html" class="sidebar-link">EqualizerWidget</a><a href="React_Widgets_FileBrowserWidget.html" class="sidebar-link">FileBrowserWidget</a><a href="React_Widgets_GitTreeWidget.html" class="sidebar-link">GitTreeWidget</a><a href="React_Widgets_InlineSvgIconWidget.html" class="sidebar-link">InlineSvgIconWidget</a><a href="React_Widgets_InlineToggleButtonWidget.html" class="sidebar-link">InlineToggleButtonWidget</a><a href="React_Widgets_LayoutsWidget.html" class="sidebar-link">LayoutsWidget</a><a href="React_Widgets_LookupTableWidget.html" class="sidebar-link">LookupTableWidget</a><a href="React_Widgets_NumberInputWidget.html" class="sidebar-link">NumberInputWidget</a><a href="React_Widgets_NumberSliderWidget.html" class="sidebar-link">NumberSliderWidget</a><a href="React_Widgets_OverlayTitleBar.html" class="sidebar-link">OverlayTitleBar</a><a href="React_Widgets_PieceWiseFunctionEditorWidget.html" class="sidebar-link">PieceWiseFunctionEditorWidget</a><a href="React_Widgets_PieceWiseGaussianFunctionEditorWidget.html" class="sidebar-link">PieceWiseGaussianFunctionEditorWidget</a><a href="React_Widgets_PresetListWidget.html" class="sidebar-link">PresetListWidget</a><a href="React_Widgets_ProgressLoaderWidget.html" class="sidebar-link">ProgressLoaderWidget</a><a href="React_Widgets_ProxyEditorWidget.html" class="sidebar-link">ProxyEditorWidget</a><a href="React_Widgets_ProxyPropertyGroupWidget.html" class="sidebar-link">ProxyPropertyGroupWidget</a><a href="React_Widgets_QueryDataModelWidget.html" class="sidebar-link">QueryDataModelWidget</a><a href="React_Widgets_ResplendentWidget.html" class="sidebar-link">ResplendentWidget</a><a href="React_Widgets_ScalarRangeWidget.html" class="sidebar-link">ScalarRangeWidget</a><a href="React_Widgets_ScatterPlotCameraControl.html" class="sidebar-link">ScatterPlotCameraControl</a><a href="React_Widgets_ScatterPlotControl.html" class="sidebar-link">ScatterPlotControl</a><a href="React_Widgets_SelectionEditorWidget.html" class="sidebar-link">SelectionEditorWidget</a><a href="React_Widgets_SvgIconWidget.html" class="sidebar-link">SvgIconWidget</a><a href="React_Widgets_TextInputWidget.html" class="sidebar-link">TextInputWidget</a><a href="React_Widgets_ToggleIconButtonWidget.html" class="sidebar-link">ToggleIconButtonWidget</a><a href="React_Widgets_TogglePanelWidget.html" class="sidebar-link">TogglePanelWidget</a><strong class="sidebar-title">Rendering/Chart</strong><a href="Rendering_Chart_CDFChartBuilder.html" class="sidebar-link">CDFChartBuilder</a><a href="Rendering_Chart_Histogram2DPlotlyChartBuilder.html" class="sidebar-link">Histogram2DPlotlyChartBuilder</a><a href="Rendering_Chart_PlotlyChartBuilder.html" class="sidebar-link">PlotlyChartBuilder</a><strong class="sidebar-title">Rendering/Geometry</strong><a href="Rendering_Geometry_ThreeGeometryBuilder.html" class="sidebar-link">ThreeGeometryBuilder</a><a href="Rendering_Geometry_VTKGeometryBuilder.html" class="sidebar-link">VTKGeometryBuilder</a><a href="Rendering_Geometry_VTKVolumeBuilder.html" class="sidebar-link">VTKVolumeBuilder</a><strong class="sidebar-title">Rendering/Image</strong><a href="Rendering_Image_AbstractImageBuilder.html" class="sidebar-link">AbstractImageBuilder</a><a href="Rendering_Image_BinaryDataProberImageBuilder.html" class="sidebar-link">BinaryDataProberImageBuilder</a><a href="Rendering_Image_CompositeImageBuilder.html" class="sidebar-link">CompositeImageBuilder</a><a href="Rendering_Image_DataProberImageBuilder.html" class="sidebar-link">DataProberImageBuilder</a><a href="Rendering_Image_DepthCompositeImageBuilder.html" class="sidebar-link">DepthCompositeImageBuilder</a><a href="Rendering_Image_DepthImageBuilder.html" class="sidebar-link">DepthImageBuilder</a><a href="Rendering_Image_FloatDataImageBuilder.html" class="sidebar-link">FloatDataImageBuilder</a><a href="Rendering_Image_FloatTimeDataImageBuilder.html" class="sidebar-link">FloatTimeDataImageBuilder</a><a href="Rendering_Image_Histogram2DImageBuilder.html" class="sidebar-link">Histogram2DImageBuilder</a><a href="Rendering_Image_MagicLensImageBuilder.html" class="sidebar-link">MagicLensImageBuilder</a><a href="Rendering_Image_MultiColorBySortedCompositeImageBuilder.html" class="sidebar-link">MultiColorBySortedCompositeImageBuilder</a><a href="Rendering_Image_PixelOperatorImageBuilder.html" class="sidebar-link">PixelOperatorImageBuilder</a><a href="Rendering_Image_QueryDataModelImageBuilder.html" class="sidebar-link">QueryDataModelImageBuilder</a><a href="Rendering_Image_SortedCompositeImageBuilder.html" class="sidebar-link">SortedCompositeImageBuilder</a><strong class="sidebar-title">Rendering/Painter</strong><a href="Rendering_Painter_LineChartPainter.html" class="sidebar-link">LineChartPainter</a></div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2022 <a href="https://www.kitware.com/" target="_blank">Kitware Inc.</a>
    </div>

    <div id="footer-links">
      <a href="https://github.com/kitware/paraviewweb" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
    </div>
  </div>
    <a
      style="position: fixed; background: #00529b; color: white; top: 0; right: 0; height: 70px"
      target="_blank" rel="noopener" href="https://www.kitware.com/careers"
    >
      <div style="position: relative; text-align: center;">
        <div
          style="margin-top: 5px; background: url(https://www.cmake.org/wp-content/uploads/2018/09/jobs_icon.png) no-repeat; background-size: 100%; width: 50px; height: 40px; margin: 5px auto 0;"
        ></div>
        <span style="padding: 5px 10px">Kitware is Hiring</span>
      </div>
    </a>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/paraviewweb/docs/" class="mobile-nav-link">Docs</a><a href="/paraviewweb/api/" class="mobile-nav-link">API</a><a href="/paraviewweb/examples/" class="mobile-nav-link">Examples</a><a href="/paraviewweb/applications/" class="mobile-nav-link">Applications</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/kitware/paraviewweb" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">Common/Core</strong><a href="Common_Core_CompositeClosureHelper.html" class="mobile-nav-link">CompositeClosureHelper</a><a href="Common_Core_LookupTable.html" class="mobile-nav-link">LookupTable</a><a href="Common_Core_LookupTableManager.html" class="mobile-nav-link">LookupTableManager</a><strong class="mobile-nav-title">Common/Misc</strong><a href="Common_Misc_AnnotationBuilder.html" class="mobile-nav-link">AnnotationBuilder</a><a href="Common_Misc_BusyMonitor.html" class="mobile-nav-link">BusyMonitor</a><a href="Common_Misc_CanvasOffscreenBuffer.html" class="mobile-nav-link">CanvasOffscreenBuffer</a><a href="Common_Misc_ColorPalettes.html" class="mobile-nav-link">ColorPalettes</a><a href="Common_Misc_Convert.html" class="mobile-nav-link">Convert</a><a href="Common_Misc_ConvertProxyProperty.html" class="mobile-nav-link">ConvertProxyProperty</a><a href="Common_Misc_Debounce.html" class="mobile-nav-link">Debounce</a><a href="Common_Misc_ImageExporter.html" class="mobile-nav-link">ImageExporter</a><a href="Common_Misc_Loop.html" class="mobile-nav-link">Loop</a><a href="Common_Misc_NumberFormatter.html" class="mobile-nav-link">NumberFormatter</a><a href="Common_Misc_Observable.html" class="mobile-nav-link">Observable</a><a href="Common_Misc_PingPong.html" class="mobile-nav-link">PingPong</a><a href="Common_Misc_SelectionBuilder.html" class="mobile-nav-link">SelectionBuilder</a><a href="Common_Misc_SizeHelper.html" class="mobile-nav-link">SizeHelper</a><a href="Common_Misc_TimeProbeManager.html" class="mobile-nav-link">TimeProbeManager</a><a href="Common_Misc_URLExtract.html" class="mobile-nav-link">URLExtract</a><a href="Common_Misc_UUID.html" class="mobile-nav-link">UUID</a><a href="Common_Misc_Validate.html" class="mobile-nav-link">Validate</a><a href="Common_Misc_WebGl.html" class="mobile-nav-link">WebGl</a><strong class="mobile-nav-title">Common/State</strong><a href="Common_State_EqualizerState.html" class="mobile-nav-link">EqualizerState</a><a href="Common_State_PipelineState.html" class="mobile-nav-link">PipelineState</a><a href="Common_State_ToggleState.html" class="mobile-nav-link">ToggleState</a><strong class="mobile-nav-title">Component/Native</strong><a href="Component_Native_BackgroundColor.html" class="mobile-nav-link">BackgroundColor</a><a href="Component_Native_Composite.html" class="mobile-nav-link">Composite</a><a href="Component_Native_Spacer.html" class="mobile-nav-link">Spacer</a><a href="Component_Native_ToggleControl.html" class="mobile-nav-link">ToggleControl</a><a href="Component_Native_Workbench.html" class="mobile-nav-link">Workbench</a><strong class="mobile-nav-title">Component/React</strong><a href="Component_React_ComponentToReact.html" class="mobile-nav-link">ComponentToReact</a><a href="Component_React_ReactAdapter.html" class="mobile-nav-link">ReactAdapter</a><a href="Component_React_WorkbenchController.html" class="mobile-nav-link">WorkbenchController</a><strong class="mobile-nav-title">InfoViz/Core</strong><a href="InfoViz_Core_AnnotationStoreProvider.html" class="mobile-nav-link">AnnotationStoreProvider</a><a href="InfoViz_Core_D3MultiClick.html" class="mobile-nav-link">D3MultiClick</a><a href="InfoViz_Core_FieldProvider.html" class="mobile-nav-link">FieldProvider</a><a href="InfoViz_Core_Histogram1DProvider.html" class="mobile-nav-link">Histogram1DProvider</a><a href="InfoViz_Core_Histogram2DProvider.html" class="mobile-nav-link">Histogram2DProvider</a><a href="InfoViz_Core_HistogramBinHoverProvider.html" class="mobile-nav-link">HistogramBinHoverProvider</a><a href="InfoViz_Core_LegendProvider.html" class="mobile-nav-link">LegendProvider</a><a href="InfoViz_Core_MutualInformationProvider.html" class="mobile-nav-link">MutualInformationProvider</a><a href="InfoViz_Core_PersistentStateProvider.html" class="mobile-nav-link">PersistentStateProvider</a><a href="InfoViz_Core_ScoresProvider.html" class="mobile-nav-link">ScoresProvider</a><a href="InfoViz_Core_SelectionProvider.html" class="mobile-nav-link">SelectionProvider</a><strong class="mobile-nav-title">InfoViz/Native</strong><a href="InfoViz_Native_FieldSelector.html" class="mobile-nav-link">FieldSelector</a><a href="InfoViz_Native_HistogramSelector.html" class="mobile-nav-link">HistogramSelector</a><a href="InfoViz_Native_MutualInformationDiagram.html" class="mobile-nav-link current">MutualInformationDiagram</a><a href="InfoViz_Native_ParallelCoordinates.html" class="mobile-nav-link">ParallelCoordinates</a><strong class="mobile-nav-title">Interaction/Core</strong><a href="Interaction_Core_MouseHandler.html" class="mobile-nav-link">MouseHandler</a><a href="Interaction_Core_VtkWebMouseListener.html" class="mobile-nav-link">VtkWebMouseListener</a><strong class="mobile-nav-title">IO/Core</strong><a href="IO_Core_CSVReader.html" class="mobile-nav-link">CSVReader</a><a href="IO_Core_DataManager.html" class="mobile-nav-link">DataManager</a><a href="IO_Core_GeometryDataModel.html" class="mobile-nav-link">GeometryDataModel</a><a href="IO_Core_ProcessLauncher.html" class="mobile-nav-link">ProcessLauncher</a><a href="IO_Core_QueryDataModel.html" class="mobile-nav-link">QueryDataModel</a><a href="IO_Core_VTKGeometryDataModel.html" class="mobile-nav-link">VTKGeometryDataModel</a><a href="IO_Core_VTKImageDataModel.html" class="mobile-nav-link">VTKImageDataModel</a><a href="IO_Core_VTKSLICDataModel.html" class="mobile-nav-link">VTKSLICDataModel</a><strong class="mobile-nav-title">IO/Girder</strong><a href="IO_Girder_CoreEndpoints.html" class="mobile-nav-link">CoreEndpoints</a><a href="IO_Girder_GirderClientBuilder.html" class="mobile-nav-link">GirderClientBuilder</a><strong class="mobile-nav-title">IO/WebSocket</strong><a href="IO_WebSocket_BinaryImageStream.html" class="mobile-nav-link">BinaryImageStream</a><a href="IO_WebSocket_ParaViewWebClient.html" class="mobile-nav-link">ParaViewWebClient</a><a href="IO_WebSocket_WslinkImageStream.html" class="mobile-nav-link">WslinkImageStream</a><strong class="mobile-nav-title">NativeUI/Canvas</strong><a href="NativeUI_Canvas_GaussianPieceWiseEditor.html" class="mobile-nav-link">GaussianPieceWiseEditor</a><a href="NativeUI_Canvas_LinearPieceWiseEditor.html" class="mobile-nav-link">LinearPieceWiseEditor</a><a href="NativeUI_Canvas_RemoteRenderer.html" class="mobile-nav-link">RemoteRenderer</a><strong class="mobile-nav-title">NativeUI/Renderers</strong><a href="NativeUI_Renderers_NativeImageRenderer.html" class="mobile-nav-link">NativeImageRenderer</a><a href="NativeUI_Renderers_RemoteRendererStatsTable.html" class="mobile-nav-link">RemoteRendererStatsTable</a><a href="NativeUI_Renderers_VtkRenderer.html" class="mobile-nav-link">VtkRenderer</a><strong class="mobile-nav-title">React/CollapsibleControls</strong><a href="React_CollapsibleControls_CollapsibleControlFactory.html" class="mobile-nav-link">CollapsibleControlFactory</a><a href="React_CollapsibleControls_FloatImageControl.html" class="mobile-nav-link">FloatImageControl</a><a href="React_CollapsibleControls_LightControl.html" class="mobile-nav-link">LightControl</a><a href="React_CollapsibleControls_LookupTableManagerControl.html" class="mobile-nav-link">LookupTableManagerControl</a><a href="React_CollapsibleControls_MultiViewControl.html" class="mobile-nav-link">MultiViewControl</a><a href="React_CollapsibleControls_PixelOperatorControl.html" class="mobile-nav-link">PixelOperatorControl</a><a href="React_CollapsibleControls_PlotlyChartControl.html" class="mobile-nav-link">PlotlyChartControl</a><a href="React_CollapsibleControls_ProbeControl.html" class="mobile-nav-link">ProbeControl</a><a href="React_CollapsibleControls_QueryDataModelControl.html" class="mobile-nav-link">QueryDataModelControl</a><a href="React_CollapsibleControls_TimeFloatImageControl.html" class="mobile-nav-link">TimeFloatImageControl</a><a href="React_CollapsibleControls_VolumeControl.html" class="mobile-nav-link">VolumeControl</a><strong class="mobile-nav-title">React/Containers</strong><a href="React_Containers_OverlayWindow.html" class="mobile-nav-link">OverlayWindow</a><strong class="mobile-nav-title">React/Properties</strong><a href="React_Properties_CellProperty.html" class="mobile-nav-link">CellProperty</a><a href="React_Properties_CheckboxProperty.html" class="mobile-nav-link">CheckboxProperty</a><a href="React_Properties_CollapsiblePropertyGroup.html" class="mobile-nav-link">CollapsiblePropertyGroup</a><a href="React_Properties_ColorProperty.html" class="mobile-nav-link">ColorProperty</a><a href="React_Properties_EnumProperty.html" class="mobile-nav-link">EnumProperty</a><a href="React_Properties_MapProperty.html" class="mobile-nav-link">MapProperty</a><a href="React_Properties_PropertyFactory.html" class="mobile-nav-link">PropertyFactory</a><a href="React_Properties_PropertyGroup.html" class="mobile-nav-link">PropertyGroup</a><a href="React_Properties_PropertyPanel.html" class="mobile-nav-link">PropertyPanel</a><a href="React_Properties_SliderProperty.html" class="mobile-nav-link">SliderProperty</a><strong class="mobile-nav-title">React/Renderers</strong><a href="React_Renderers_GeometryRenderer.html" class="mobile-nav-link">GeometryRenderer</a><a href="React_Renderers_ImageRenderer.html" class="mobile-nav-link">ImageRenderer</a><a href="React_Renderers_MultiLayoutRenderer.html" class="mobile-nav-link">MultiLayoutRenderer</a><a href="React_Renderers_PlotlyRenderer.html" class="mobile-nav-link">PlotlyRenderer</a><a href="React_Renderers_VtkGeometryRenderer.html" class="mobile-nav-link">VtkGeometryRenderer</a><a href="React_Renderers_VtkRenderer.html" class="mobile-nav-link">VtkRenderer</a><strong class="mobile-nav-title">React/ToggleTools</strong><a href="React_ToggleTools_AnnotationEditor.html" class="mobile-nav-link">AnnotationEditor</a><a href="React_ToggleTools_FieldSelector.html" class="mobile-nav-link">FieldSelector</a><a href="React_ToggleTools_ParallelCoordinates.html" class="mobile-nav-link">ParallelCoordinates</a><a href="React_ToggleTools_ScatterPlotControl.html" class="mobile-nav-link">ScatterPlotControl</a><a href="React_ToggleTools_WorkbenchLayout.html" class="mobile-nav-link">WorkbenchLayout</a><strong class="mobile-nav-title">React/Viewers</strong><a href="React_Viewers_AbstractViewerMenu.html" class="mobile-nav-link">AbstractViewerMenu</a><a href="React_Viewers_ChartViewer.html" class="mobile-nav-link">ChartViewer</a><a href="React_Viewers_GeometryViewer.html" class="mobile-nav-link">GeometryViewer</a><a href="React_Viewers_ImageBuilderViewer.html" class="mobile-nav-link">ImageBuilderViewer</a><a href="React_Viewers_LineChartViewer.html" class="mobile-nav-link">LineChartViewer</a><a href="React_Viewers_MultiLayoutViewer.html" class="mobile-nav-link">MultiLayoutViewer</a><a href="React_Viewers_Probe3DViewer.html" class="mobile-nav-link">Probe3DViewer</a><strong class="mobile-nav-title">React/Widgets</strong><a href="React_Widgets_ActionListWidget.html" class="mobile-nav-link">ActionListWidget</a><a href="React_Widgets_AnnotationEditorWidget.html" class="mobile-nav-link">AnnotationEditorWidget</a><a href="React_Widgets_AnnotationStoreEditorWidget.html" class="mobile-nav-link">AnnotationStoreEditorWidget</a><a href="React_Widgets_BusyFeedback.html" class="mobile-nav-link">BusyFeedback</a><a href="React_Widgets_ButtonSelectorWidget.html" class="mobile-nav-link">ButtonSelectorWidget</a><a href="React_Widgets_CollapsibleWidget.html" class="mobile-nav-link">CollapsibleWidget</a><a href="React_Widgets_ColorByWidget.html" class="mobile-nav-link">ColorByWidget</a><a href="React_Widgets_ColorMapEditorWidget.html" class="mobile-nav-link">ColorMapEditorWidget</a><a href="React_Widgets_ColorPickerWidget.html" class="mobile-nav-link">ColorPickerWidget</a><a href="React_Widgets_CompositePipelineWidget.html" class="mobile-nav-link">CompositePipelineWidget</a><a href="React_Widgets_ContentEditableWidget.html" class="mobile-nav-link">ContentEditableWidget</a><a href="React_Widgets_Coordinate2DWidget.html" class="mobile-nav-link">Coordinate2DWidget</a><a href="React_Widgets_CountToolbar.html" class="mobile-nav-link">CountToolbar</a><a href="React_Widgets_DoubleSliderWidget.html" class="mobile-nav-link">DoubleSliderWidget</a><a href="React_Widgets_DropDownWidget.html" class="mobile-nav-link">DropDownWidget</a><a href="React_Widgets_EditableListWidget.html" class="mobile-nav-link">EditableListWidget</a><a href="React_Widgets_EqualizerWidget.html" class="mobile-nav-link">EqualizerWidget</a><a href="React_Widgets_FileBrowserWidget.html" class="mobile-nav-link">FileBrowserWidget</a><a href="React_Widgets_GitTreeWidget.html" class="mobile-nav-link">GitTreeWidget</a><a href="React_Widgets_InlineSvgIconWidget.html" class="mobile-nav-link">InlineSvgIconWidget</a><a href="React_Widgets_InlineToggleButtonWidget.html" class="mobile-nav-link">InlineToggleButtonWidget</a><a href="React_Widgets_LayoutsWidget.html" class="mobile-nav-link">LayoutsWidget</a><a href="React_Widgets_LookupTableWidget.html" class="mobile-nav-link">LookupTableWidget</a><a href="React_Widgets_NumberInputWidget.html" class="mobile-nav-link">NumberInputWidget</a><a href="React_Widgets_NumberSliderWidget.html" class="mobile-nav-link">NumberSliderWidget</a><a href="React_Widgets_OverlayTitleBar.html" class="mobile-nav-link">OverlayTitleBar</a><a href="React_Widgets_PieceWiseFunctionEditorWidget.html" class="mobile-nav-link">PieceWiseFunctionEditorWidget</a><a href="React_Widgets_PieceWiseGaussianFunctionEditorWidget.html" class="mobile-nav-link">PieceWiseGaussianFunctionEditorWidget</a><a href="React_Widgets_PresetListWidget.html" class="mobile-nav-link">PresetListWidget</a><a href="React_Widgets_ProgressLoaderWidget.html" class="mobile-nav-link">ProgressLoaderWidget</a><a href="React_Widgets_ProxyEditorWidget.html" class="mobile-nav-link">ProxyEditorWidget</a><a href="React_Widgets_ProxyPropertyGroupWidget.html" class="mobile-nav-link">ProxyPropertyGroupWidget</a><a href="React_Widgets_QueryDataModelWidget.html" class="mobile-nav-link">QueryDataModelWidget</a><a href="React_Widgets_ResplendentWidget.html" class="mobile-nav-link">ResplendentWidget</a><a href="React_Widgets_ScalarRangeWidget.html" class="mobile-nav-link">ScalarRangeWidget</a><a href="React_Widgets_ScatterPlotCameraControl.html" class="mobile-nav-link">ScatterPlotCameraControl</a><a href="React_Widgets_ScatterPlotControl.html" class="mobile-nav-link">ScatterPlotControl</a><a href="React_Widgets_SelectionEditorWidget.html" class="mobile-nav-link">SelectionEditorWidget</a><a href="React_Widgets_SvgIconWidget.html" class="mobile-nav-link">SvgIconWidget</a><a href="React_Widgets_TextInputWidget.html" class="mobile-nav-link">TextInputWidget</a><a href="React_Widgets_ToggleIconButtonWidget.html" class="mobile-nav-link">ToggleIconButtonWidget</a><a href="React_Widgets_TogglePanelWidget.html" class="mobile-nav-link">TogglePanelWidget</a><strong class="mobile-nav-title">Rendering/Chart</strong><a href="Rendering_Chart_CDFChartBuilder.html" class="mobile-nav-link">CDFChartBuilder</a><a href="Rendering_Chart_Histogram2DPlotlyChartBuilder.html" class="mobile-nav-link">Histogram2DPlotlyChartBuilder</a><a href="Rendering_Chart_PlotlyChartBuilder.html" class="mobile-nav-link">PlotlyChartBuilder</a><strong class="mobile-nav-title">Rendering/Geometry</strong><a href="Rendering_Geometry_ThreeGeometryBuilder.html" class="mobile-nav-link">ThreeGeometryBuilder</a><a href="Rendering_Geometry_VTKGeometryBuilder.html" class="mobile-nav-link">VTKGeometryBuilder</a><a href="Rendering_Geometry_VTKVolumeBuilder.html" class="mobile-nav-link">VTKVolumeBuilder</a><strong class="mobile-nav-title">Rendering/Image</strong><a href="Rendering_Image_AbstractImageBuilder.html" class="mobile-nav-link">AbstractImageBuilder</a><a href="Rendering_Image_BinaryDataProberImageBuilder.html" class="mobile-nav-link">BinaryDataProberImageBuilder</a><a href="Rendering_Image_CompositeImageBuilder.html" class="mobile-nav-link">CompositeImageBuilder</a><a href="Rendering_Image_DataProberImageBuilder.html" class="mobile-nav-link">DataProberImageBuilder</a><a href="Rendering_Image_DepthCompositeImageBuilder.html" class="mobile-nav-link">DepthCompositeImageBuilder</a><a href="Rendering_Image_DepthImageBuilder.html" class="mobile-nav-link">DepthImageBuilder</a><a href="Rendering_Image_FloatDataImageBuilder.html" class="mobile-nav-link">FloatDataImageBuilder</a><a href="Rendering_Image_FloatTimeDataImageBuilder.html" class="mobile-nav-link">FloatTimeDataImageBuilder</a><a href="Rendering_Image_Histogram2DImageBuilder.html" class="mobile-nav-link">Histogram2DImageBuilder</a><a href="Rendering_Image_MagicLensImageBuilder.html" class="mobile-nav-link">MagicLensImageBuilder</a><a href="Rendering_Image_MultiColorBySortedCompositeImageBuilder.html" class="mobile-nav-link">MultiColorBySortedCompositeImageBuilder</a><a href="Rendering_Image_PixelOperatorImageBuilder.html" class="mobile-nav-link">PixelOperatorImageBuilder</a><a href="Rendering_Image_QueryDataModelImageBuilder.html" class="mobile-nav-link">QueryDataModelImageBuilder</a><a href="Rendering_Image_SortedCompositeImageBuilder.html" class="mobile-nav-link">SortedCompositeImageBuilder</a><strong class="mobile-nav-title">Rendering/Painter</strong><a href="Rendering_Painter_LineChartPainter.html" class="mobile-nav-link">LineChartPainter</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="api/InfoViz_Native_MutualInformationDiagram.html">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- build:js build/js/main.js -->

<script src="/paraviewweb/js/lang_select.js"></script>


<script src="/paraviewweb/js/toc.js"></script>


<script src="/paraviewweb/js/mobile_nav.js"></script>

<!-- endbuild -->
<script src="https://cdn.jsdelivr.net/retinajs/1.3.0/retina.min.js" async></script>



</body>
</html>